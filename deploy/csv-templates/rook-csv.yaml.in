apiVersion: operators.coreos.com/v1alpha1
kind: ClusterServiceVersion
metadata:
  annotations:
    alm-examples: |-
      [
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephCluster",
          "metadata": {
            "name": "my-rook-ceph",
            "namespace": "my-rook-ceph"
          },
          "spec": {
            "cephVersion": {
              "image": "ceph/ceph:v15.2.9"
            },
            "dataDirHostPath": "/var/lib/rook",
            "mon": {
              "count": 3
            },
            "dashboard": {
              "enabled": true
            },
            "network": {
              "hostNetwork": false
            },
            "rbdMirroring": {
              "workers": 0
            },
            "storage": {
              "useAllNodes": true,
              "useAllDevices": true
            }
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephBlockPool",
          "metadata": {
            "name": "replicapool",
            "namespace": "my-rook-ceph"
          },
          "spec": {
            "failureDomain": "host",
            "replicated": {
              "size": 3
            },
            "annotations": null
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephObjectStore",
          "metadata": {
            "name": "my-store",
            "namespace": "my-rook-ceph"
          },
          "spec": {
            "metadataPool": {
              "failureDomain": "host",
              "replicated": {
                "size": 3
              }
            },
            "dataPool": {
              "failureDomain": "host",
              "replicated": {
                "size": 3
              }
            },
            "gateway": {
              "type": "s3",
              "sslCertificateRef": null,
              "port": 8080,
              "securePort": null,
              "instances": 1,
              "placement": null,
              "annotations": null,
              "resources": null
            }
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephObjectStoreUser",
          "metadata": {
            "name": "my-user",
            "namespace": "my-rook-ceph"
          },
          "spec": {
            "store": "my-store",
            "displayName": "my display name"
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephNFS",
          "metadata": {
            "name": "my-nfs",
            "namespace": "rook-ceph"
          },
          "spec": {
            "rados": {
              "pool": "myfs-data0",
              "namespace": "nfs-ns"
            },
            "server": {
              "active": 3,
              "placement": null,
              "annotations": null,
              "resources": null
            }
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephClient",
          "metadata": {
            "name": "cinder",
            "namespace": "rook-ceph"
          },
          "spec": {
            "caps": {
              "mon": "profile rbd",
              "osd": "profile rbd pool=volumes, profile rbd pool=vms, profile rbd-read-only pool=images"
            }
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephFilesystem",
          "metadata": {
            "name": "myfs",
            "namespace": "rook-ceph"
          },
          "spec": {
            "dataPools": [
              {
                "compressionMode": "",
                "crushRoot": "",
                "deviceClass": "",
                "erasureCoded": {
                  "algorithm": "",
                  "codingChunks": 0,
                  "dataChunks": 0
                },
                "failureDomain": "host",
                "replicated": {
                  "requireSafeReplicaSize": false,
                  "size": 1,
                  "targetSizeRatio": 0.5
                }
              }
            ],
            "metadataPool": {
              "compressionMode": "",
              "crushRoot": "",
              "deviceClass": "",
              "erasureCoded": {
                "algorithm": "",
                "codingChunks": 0,
                "dataChunks": 0
              },
              "failureDomain": "",
              "replicated": {
                "requireSafeReplicaSize": false,
                "size": 1,
                "targetSizeRatio": 0
              }
            },
            "metadataServer": {
              "activeCount": 1,
              "activeStandby": true,
              "placement": {},
              "resources": {}
            },
            "preservePoolsOnDelete": false,
            "preserveFilesystemOnDelete": false
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephRBDMirror",
          "metadata": {
            "name": "my-rbd-mirror",
            "namespace": "rook-ceph"
          },
          "spec": {
            "annotations": null,
            "count": 1,
            "placement": {
              "topologyKey": "kubernetes.io/hostname"
            },
            "resources": null
          }
        }
      ]
    capabilities: Basic Install
    tectonic-visibility: ocs
    repository: https://github.com/rook/rook
    containerImage: '{{.RookOperatorImage}}'
    externalClusterScript: |-
      JycnCkNvcHlyaWdodCAyMDIwIFRoZSBSb29rIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQu
      CgpMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxp
      Y2Vuc2UiKTsKeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3
      aXRoIHRoZSBMaWNlbnNlLgpZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQK
      CglodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKClVubGVzcyByZXF1
      aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUK
      ZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElT
      IiBCQVNJUywKV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVp
      dGhlciBleHByZXNzIG9yIGltcGxpZWQuClNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmlj
      IGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKbGltaXRhdGlvbnMgdW5kZXIgdGhl
      IExpY2Vuc2UuCicnJwoKaW1wb3J0IHN5cwppbXBvcnQganNvbgppbXBvcnQgYXJncGFyc2UKaW1w
      b3J0IHVuaXR0ZXN0CmltcG9ydCByZQppbXBvcnQgcmVxdWVzdHMKZnJvbSBvcyBpbXBvcnQgbGlu
      ZXNlcCBhcyBMSU5FU0VQCmZyb20gb3MgaW1wb3J0IHBhdGgKCiMgYmFja3dhcmQgY29tcGF0aWJp
      bGl0eSB3aXRoIDIueAp0cnk6CiAgICBNb2R1bGVOb3RGb3VuZEVycm9yCmV4Y2VwdDoKICAgIE1v
      ZHVsZU5vdEZvdW5kRXJyb3IgPSBJbXBvcnRFcnJvcgoKdHJ5OgogICAgaW1wb3J0IHJhZG9zCmV4
      Y2VwdCBNb2R1bGVOb3RGb3VuZEVycm9yIGFzIG5vTW9kRXJyOgogICAgcHJpbnQoIkVycm9yOiAl
      c1xuRXhpdGluZyB0aGUgc2NyaXB0Li4uIiAlIG5vTW9kRXJyKQogICAgc3lzLmV4aXQoMSkKCnRy
      eToKICAgICMgZm9yIDIuNy54CiAgICBmcm9tIFN0cmluZ0lPIGltcG9ydCBTdHJpbmdJTwpleGNl
      cHQgTW9kdWxlTm90Rm91bmRFcnJvcjoKICAgICMgZm9yIDMueAogICAgZnJvbSBpbyBpbXBvcnQg
      U3RyaW5nSU8KCnRyeToKICAgICMgZm9yIDIuNy54CiAgICBmcm9tIHVybHBhcnNlIGltcG9ydCB1
      cmxwYXJzZQpleGNlcHQgTW9kdWxlTm90Rm91bmRFcnJvcjoKICAgICMgZm9yIDMueAogICAgZnJv
      bSB1cmxsaWIucGFyc2UgaW1wb3J0IHVybHBhcnNlCgoKY2xhc3MgRXhlY3V0aW9uRmFpbHVyZUV4
      Y2VwdGlvbihFeGNlcHRpb24pOgogICAgcGFzcwoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyMjIyMjIyMjIyMjIyMjIyBEdW1teVJhZG9zICMjIyMj
      IyMjIyMjIyMjIyMjIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
      IyMjIyMKIyB0aGlzIGlzIG1haW5seSBmb3IgdGVzdGluZyBhbmQgY291bGQgYmUgdXNlZCB3aGVy
      ZSAncmFkb3MnIGlzIG5vdCBhdmFpbGFibGUKCgpjbGFzcyBEdW1teVJhZG9zKG9iamVjdCk6CiAg
      ICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc2VsZi5yZXR1cm5fdmFsID0gMAogICAgICAg
      IHNlbGYuZXJyX21lc3NhZ2UgPSAnJwogICAgICAgIHNlbGYuc3RhdGUgPSAnY29ubmVjdGVkJwog
      ICAgICAgIHNlbGYuY21kX291dHB1dF9tYXAgPSB7fQogICAgICAgIHNlbGYuY21kX25hbWVzID0g
      e30KICAgICAgICBzZWxmLl9pbml0X2NtZF9vdXRwdXRfbWFwKCkKICAgICAgICBzZWxmLmR1bW15
      X2hvc3RfaXBfbWFwID0ge30KCiAgICBkZWYgX2luaXRfY21kX291dHB1dF9tYXAoc2VsZik6CiAg
      ICAgICAganNvbl9maWxlX25hbWUgPSAndGVzdC1kYXRhL2NlcGgtc3RhdHVzLW91dCcKICAgICAg
      ICBzY3JpcHRfZGlyID0gcGF0aC5hYnNwYXRoKHBhdGguZGlybmFtZShfX2ZpbGVfXykpCiAgICAg
      ICAgY2VwaF9zdGF0dXNfc3RyID0gIiIKICAgICAgICB3aXRoIG9wZW4ocGF0aC5qb2luKHNjcmlw
      dF9kaXIsIGpzb25fZmlsZV9uYW1lKSwgJ3InKSBhcyBqc29uX2ZpbGU6CiAgICAgICAgICAgIGNl
      cGhfc3RhdHVzX3N0ciA9IGpzb25fZmlsZS5yZWFkKCkKICAgICAgICBzZWxmLmNtZF9uYW1lc1sn
      ZnMgbHMnXSA9ICcnJ3siZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImZzIGxzIn0nJycKICAg
      ICAgICBzZWxmLmNtZF9uYW1lc1sncXVvcnVtX3N0YXR1cyddID0gJycneyJmb3JtYXQiOiAianNv
      biIsICJwcmVmaXgiOiAicXVvcnVtX3N0YXR1cyJ9JycnCiAgICAgICAgc2VsZi5jbWRfbmFtZXNb
      J2NhcHNfY2hhbmdlX2RlZmF1bHRfcG9vbF9wcmVmaXgnXSA9ICcnJ3siY2FwcyI6IFsibW9uIiwg
      ImFsbG93IHIsIGFsbG93IGNvbW1hbmQgcXVvcnVtX3N0YXR1cywgYWxsb3cgY29tbWFuZCB2ZXJz
      aW9uIiwgIm1nciIsICJhbGxvdyBjb21tYW5kIGNvbmZpZyIsICJvc2QiLCAiYWxsb3cgcnd4IHBv
      b2w9ZGVmYXVsdC5yZ3cubWV0YSwgYWxsb3cgciBwb29sPS5yZ3cucm9vdCwgYWxsb3cgcncgcG9v
      bD1kZWZhdWx0LnJndy5jb250cm9sLCBhbGxvdyByeCBwb29sPWRlZmF1bHQucmd3LmxvZywgYWxs
      b3cgeCBwb29sPWRlZmF1bHQucmd3LmJ1Y2tldHMuaW5kZXgiXSwgImVudGl0eSI6ICJjbGllbnQu
      aGVhbHRoY2hlY2tlciIsICJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAiYXV0aCBjYXBzIn0n
      JycKICAgICAgICAjIGFsbCB0aGUgY29tbWFuZHMgYW5kIHRoZWlyIG91dHB1dAogICAgICAgIHNl
      bGYuY21kX291dHB1dF9tYXBbc2VsZi5jbWRfbmFtZXNbJ2ZzIGxzJ10KICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgIF0gPSAnJydbeyJuYW1lIjoibXlmcyIsIm1ldGFkYXRhX3Bvb2wiOiJteWZz
      LW1ldGFkYXRhIiwibWV0YWRhdGFfcG9vbF9pZCI6MiwiZGF0YV9wb29sX2lkcyI6WzNdLCJkYXRh
      X3Bvb2xzIjpbIm15ZnMtZGF0YTAiXX1dJycnCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFtz
      ZWxmLmNtZF9uYW1lc1sncXVvcnVtX3N0YXR1cyddXSA9ICcnJ3siZWxlY3Rpb25fZXBvY2giOjMs
      InF1b3J1bSI6WzBdLCJxdW9ydW1fbmFtZXMiOlsiYSJdLCJxdW9ydW1fbGVhZGVyX25hbWUiOiJh
      IiwicXVvcnVtX2FnZSI6MTQzODUsImZlYXR1cmVzIjp7InF1b3J1bV9jb24iOiI0NTQwMTM4Mjky
      ODM2Njk2MDYzIiwicXVvcnVtX21vbiI6WyJrcmFrZW4iLCJsdW1pbm91cyIsIm1pbWljIiwib3Nk
      bWFwLXBydW5lIiwibmF1dGlsdXMiLCJvY3RvcHVzIl19LCJtb25tYXAiOnsiZXBvY2giOjEsImZz
      aWQiOiJhZjRlMTY3My0wYjcyLTQwMmQtOTkwYS0yMmQyOTE5ZDBmMWMiLCJtb2RpZmllZCI6IjIw
      MjAtMDUtMDdUMDM6MzY6MzkuOTE4MDM1WiIsImNyZWF0ZWQiOiIyMDIwLTA1LTA3VDAzOjM2OjM5
      LjkxODAzNVoiLCJtaW5fbW9uX3JlbGVhc2UiOjE1LCJtaW5fbW9uX3JlbGVhc2VfbmFtZSI6Im9j
      dG9wdXMiLCJmZWF0dXJlcyI6eyJwZXJzaXN0ZW50IjpbImtyYWtlbiIsImx1bWlub3VzIiwibWlt
      aWMiLCJvc2RtYXAtcHJ1bmUiLCJuYXV0aWx1cyIsIm9jdG9wdXMiXSwib3B0aW9uYWwiOltdfSwi
      bW9ucyI6W3sicmFuayI6MCwibmFtZSI6ImEiLCJwdWJsaWNfYWRkcnMiOnsiYWRkcnZlYyI6W3si
      dHlwZSI6InYyIiwiYWRkciI6IjEwLjExMC4yMDUuMTc0OjMzMDAiLCJub25jZSI6MH0seyJ0eXBl
      IjoidjEiLCJhZGRyIjoiMTAuMTEwLjIwNS4xNzQ6Njc4OSIsIm5vbmNlIjowfV19LCJhZGRyIjoi
      MTAuMTEwLjIwNS4xNzQ6Njc4OS8wIiwicHVibGljX2FkZHIiOiIxMC4xMTAuMjA1LjE3NDo2Nzg5
      LzAiLCJwcmlvcml0eSI6MCwid2VpZ2h0IjowfV19fScnJwogICAgICAgIHNlbGYuY21kX291dHB1
      dF9tYXBbJycneyJjYXBzIjogWyJtb24iLCAiYWxsb3cgciwgYWxsb3cgY29tbWFuZCBxdW9ydW1f
      c3RhdHVzIiwgIm9zZCIsICJhbGxvdyByd3ggcG9vbD1kZWZhdWx0LnJndy5tZXRhLCBhbGxvdyBy
      IHBvb2w9LnJndy5yb290LCBhbGxvdyBydyBwb29sPWRlZmF1bHQucmd3LmNvbnRyb2wsIGFsbG93
      IHggcG9vbD1kZWZhdWx0LnJndy5idWNrZXRzLmluZGV4Il0sICJlbnRpdHkiOiAiY2xpZW50Lmhl
      YWx0aGNoZWNrZXIiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0LW9yLWNy
      ZWF0ZSJ9JycnXSA9ICcnJ1t7ImVudGl0eSI6ImNsaWVudC5oZWFsdGhjaGVja2VyIiwia2V5Ijoi
      QVFERmtiTmVmdDViRlJBQVRuZExOVVNFS3J1b3p4aVppM2xyZEE9PSIsImNhcHMiOnsibW9uIjoi
      YWxsb3cgciwgYWxsb3cgY29tbWFuZCBxdW9ydW1fc3RhdHVzIiwib3NkIjoiYWxsb3cgcnd4IHBv
      b2w9ZGVmYXVsdC5yZ3cubWV0YSwgYWxsb3cgciBwb29sPS5yZ3cucm9vdCwgYWxsb3cgcncgcG9v
      bD1kZWZhdWx0LnJndy5jb250cm9sLCBhbGxvdyB4IHBvb2w9ZGVmYXVsdC5yZ3cuYnVja2V0cy5p
      bmRleCJ9fV0nJycKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWycnJ3siY2FwcyI6IFsibW9u
      IiwgInByb2ZpbGUgcmJkIiwgIm9zZCIsICJwcm9maWxlIHJiZCJdLCAiZW50aXR5IjogImNsaWVu
      dC5jc2ktcmJkLW5vZGUiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0LW9y
      LWNyZWF0ZSJ9JycnXSA9ICcnJ1t7ImVudGl0eSI6ImNsaWVudC5jc2ktcmJkLW5vZGUiLCJrZXki
      OiJBUUJPZ3JOZUhiSzFBeEFBdWJZQmVWOFMxVS9HUHpxNVNWZXE2Zz09IiwiY2FwcyI6eyJtb24i
      OiJwcm9maWxlIHJiZCIsIm9zZCI6InByb2ZpbGUgcmJkIn19XScnJwogICAgICAgIHNlbGYuY21k
      X291dHB1dF9tYXBbJycneyJjYXBzIjogWyJtb24iLCAicHJvZmlsZSByYmQiLCAibWdyIiwgImFs
      bG93IHJ3IiwgIm9zZCIsICJwcm9maWxlIHJiZCJdLCAiZW50aXR5IjogImNsaWVudC5jc2ktcmJk
      LXByb3Zpc2lvbmVyIiwgImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGdldC1vci1j
      cmVhdGUifScnJ10gPSAnJydbeyJlbnRpdHkiOiJjbGllbnQuY3NpLXJiZC1wcm92aXNpb25lciIs
      ImtleSI6IkFRQk5nck5lMWdleUt4QUE4ZWtWaVJkRStoc3M1T3dlWUJrd05nPT0iLCJjYXBzIjp7
      Im1nciI6ImFsbG93IHJ3IiwibW9uIjoicHJvZmlsZSByYmQiLCJvc2QiOiJwcm9maWxlIHJiZCJ9
      fV0nJycKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWycnJ3siY2FwcyI6IFsibW9uIiwgImFs
      bG93IHIiLCAibWdyIiwgImFsbG93IHJ3IiwgIm9zZCIsICJhbGxvdyBydyB0YWcgY2VwaGZzICo9
      KiIsICJtZHMiLCAiYWxsb3cgcnciXSwgImVudGl0eSI6ICJjbGllbnQuY3NpLWNlcGhmcy1ub2Rl
      IiwgImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGdldC1vci1jcmVhdGUifScnJ10g
      PSAnJydbeyJlbnRpdHkiOiJjbGllbnQuY3NpLWNlcGhmcy1ub2RlIiwia2V5IjoiQVFCT2dyTmVF
      TnVuS3hBQVBDbWdFN1I2RzhEY1huYUoxRjMycWc9PSIsImNhcHMiOnsibWRzIjoiYWxsb3cgcnci
      LCJtZ3IiOiJhbGxvdyBydyIsIm1vbiI6ImFsbG93IHIiLCJvc2QiOiJhbGxvdyBydyB0YWcgY2Vw
      aGZzICo9KiJ9fV0nJycKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWycnJ3siY2FwcyI6IFsi
      bW9uIiwgImFsbG93IHIiLCAibWdyIiwgImFsbG93IHJ3IiwgIm9zZCIsICJhbGxvdyBydyB0YWcg
      Y2VwaGZzIG1ldGFkYXRhPSoiXSwgImVudGl0eSI6ICJjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNp
      b25lciIsICJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAiYXV0aCBnZXQtb3ItY3JlYXRlIn0n
      JyddID0gJycnW3siZW50aXR5IjoiY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXIiLCJrZXki
      OiJBUUJPZ3JOZUFGZ2NHQkFBdkdxS09BRDBEM3h4bVZZMFI5MTJkZz09IiwiY2FwcyI6eyJtZ3Ii
      OiJhbGxvdyBydyIsIm1vbiI6ImFsbG93IHIiLCJvc2QiOiJhbGxvdyBydyB0YWcgY2VwaGZzIG1l
      dGFkYXRhPSoifX1dJycnCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFsnJyd7ImNhcHMiOiBb
      Im1vbiIsICJhbGxvdyByLCBhbGxvdyBjb21tYW5kIHF1b3J1bV9zdGF0dXMsIGFsbG93IGNvbW1h
      bmQgdmVyc2lvbiIsICJtZ3IiLCAiYWxsb3cgY29tbWFuZCBjb25maWciLCAib3NkIiwgImFsbG93
      IHJ3eCBwb29sPWRlZmF1bHQucmd3Lm1ldGEsIGFsbG93IHIgcG9vbD0ucmd3LnJvb3QsIGFsbG93
      IHJ3IHBvb2w9ZGVmYXVsdC5yZ3cuY29udHJvbCwgYWxsb3cgcnggcG9vbD1kZWZhdWx0LnJndy5s
      b2csIGFsbG93IHggcG9vbD1kZWZhdWx0LnJndy5idWNrZXRzLmluZGV4Il0sICJlbnRpdHkiOiAi
      Y2xpZW50LmhlYWx0aGNoZWNrZXIiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGgg
      Z2V0LW9yLWNyZWF0ZSJ9JycnXSA9ICcnJ1t7ImVudGl0eSI6ImNsaWVudC5oZWFsdGhjaGVja2Vy
      Iiwia2V5IjoiQVFERmtiTmVmdDViRlJBQVRuZExOVVNFS3J1b3p4aVppM2xyZEE9PSIsImNhcHMi
      OnsibW9uIjogImFsbG93IHIsIGFsbG93IGNvbW1hbmQgcXVvcnVtX3N0YXR1cywgYWxsb3cgY29t
      bWFuZCB2ZXJzaW9uIiwgIm1nciI6ICJhbGxvdyBjb21tYW5kIGNvbmZpZyIsICJvc2QiOiAiYWxs
      b3cgcnd4IHBvb2w9ZGVmYXVsdC5yZ3cubWV0YSwgYWxsb3cgciBwb29sPS5yZ3cucm9vdCwgYWxs
      b3cgcncgcG9vbD1kZWZhdWx0LnJndy5jb250cm9sLCBhbGxvdyByeCBwb29sPWRlZmF1bHQucmd3
      LmxvZywgYWxsb3cgeCBwb29sPWRlZmF1bHQucmd3LmJ1Y2tldHMuaW5kZXgifX1dJycnCiAgICAg
      ICAgc2VsZi5jbWRfb3V0cHV0X21hcFsnJyd7ImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJt
      Z3Igc2VydmljZXMifScnJ10gPSAnJyd7ImRhc2hib2FyZCI6ICJodHRwOi8vcm9vay1jZXBoLW1n
      ci1hLTU3Y2Y5Zjg0YmMtZjRqbmw6NzAwMC8iLCAicHJvbWV0aGV1cyI6ICJodHRwOi8vcm9vay1j
      ZXBoLW1nci1hLTU3Y2Y5Zjg0YmMtZjRqbmw6OTI4My8ifScnJwogICAgICAgIHNlbGYuY21kX291
      dHB1dF9tYXBbJycneyJlbnRpdHkiOiAiY2xpZW50LmhlYWx0aGNoZWNrZXIiLCAiZm9ybWF0Ijog
      Impzb24iLCAicHJlZml4IjogImF1dGggZ2V0In0nJyddID0gJycneyJkYXNoYm9hcmQiOiAiaHR0
      cDovL3Jvb2stY2VwaC1tZ3ItYS01N2NmOWY4NGJjLWY0am5sOjcwMDAvIiwgInByb21ldGhldXMi
      OiAiaHR0cDovL3Jvb2stY2VwaC1tZ3ItYS01N2NmOWY4NGJjLWY0am5sOjkyODMvIn0nJycKICAg
      ICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWycnJ3siZW50aXR5IjogImNsaWVudC5oZWFsdGhjaGVj
      a2VyIiwgImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGdldCJ9JycnXSA9ICcnJ1t7
      ImVudGl0eSI6ImNsaWVudC5oZWFsdGhjaGVja2VyIiwia2V5IjoiQVFERmtiTmVmdDViRlJBQVRu
      ZExOVVNFS3J1b3p4aVppM2xyZEE9PSIsImNhcHMiOnsibW9uIjogImFsbG93IHIsIGFsbG93IGNv
      bW1hbmQgcXVvcnVtX3N0YXR1cywgYWxsb3cgY29tbWFuZCB2ZXJzaW9uIiwgIm1nciI6ICJhbGxv
      dyBjb21tYW5kIGNvbmZpZyIsICJvc2QiOiAiYWxsb3cgcnd4IHBvb2w9ZGVmYXVsdC5yZ3cubWV0
      YSwgYWxsb3cgciBwb29sPS5yZ3cucm9vdCwgYWxsb3cgcncgcG9vbD1kZWZhdWx0LnJndy5jb250
      cm9sLCBhbGxvdyByeCBwb29sPWRlZmF1bHQucmd3LmxvZywgYWxsb3cgeCBwb29sPWRlZmF1bHQu
      cmd3LmJ1Y2tldHMuaW5kZXgifX1dJycnCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFtzZWxm
      LmNtZF9uYW1lc1snY2Fwc19jaGFuZ2VfZGVmYXVsdF9wb29sX3ByZWZpeCddXSA9ICcnJ1t7fV0n
      JycKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWyd7ImZvcm1hdCI6ICJqc29uIiwgInByZWZp
      eCI6ICJzdGF0dXMifSddID0gY2VwaF9zdGF0dXNfc3RyCgogICAgZGVmIHNodXRkb3duKHNlbGYp
      OgogICAgICAgIHBhc3MKCiAgICBkZWYgZ2V0X2ZzaWQoc2VsZik6CiAgICAgICAgcmV0dXJuICdh
      ZjRlMTY3My0wYjcyLTQwMmQtOTkwYS0yMmQyOTE5ZDBmMWMnCgogICAgZGVmIGNvbmZfcmVhZF9m
      aWxlKHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgY29ubmVjdChzZWxmKToKICAgICAgICBw
      YXNzCgogICAgZGVmIHBvb2xfZXhpc3RzKHNlbGYsIHBvb2xfbmFtZSk6CiAgICAgICAgcmV0dXJu
      IFRydWUKCiAgICBkZWYgbW9uX2NvbW1hbmQoc2VsZiwgY21kLCBvdXQpOgogICAgICAgIGpzb25f
      Y21kID0ganNvbi5sb2FkcyhjbWQpCiAgICAgICAganNvbl9jbWRfc3RyID0ganNvbi5kdW1wcyhq
      c29uX2NtZCwgc29ydF9rZXlzPVRydWUpCiAgICAgICAgY21kX291dHB1dCA9IHNlbGYuY21kX291
      dHB1dF9tYXBbanNvbl9jbWRfc3RyXQogICAgICAgIHJldHVybiBzZWxmLnJldHVybl92YWwsIFwK
      ICAgICAgICAgICAgY21kX291dHB1dCwgXAogICAgICAgICAgICAie30iLmZvcm1hdChzZWxmLmVy
      cl9tZXNzYWdlKS5lbmNvZGUoJ3V0Zi04JykKCiAgICBkZWYgX2NvbnZlcnRfaG9zdG5hbWVfdG9f
      aXAoc2VsZiwgaG9zdF9uYW1lKToKICAgICAgICBpcF9yZWdfeCA9IHJlLmNvbXBpbGUocidcZHsx
      LDN9LlxkezEsM30uXGR7MSwzfS5cZHsxLDN9JykKICAgICAgICAjIGlmIHByb3ZpZGVkIGhvc3Qg
      aXMgZGlyZWN0bHkgYW4gSVAgYWRkcmVzcywgcmV0dXJuIHRoZSBzYW1lCiAgICAgICAgaWYgaXBf
      cmVnX3gubWF0Y2goaG9zdF9uYW1lKToKICAgICAgICAgICAgcmV0dXJuIGhvc3RfbmFtZQogICAg
      ICAgIGltcG9ydCByYW5kb20KICAgICAgICBob3N0X2lwID0gc2VsZi5kdW1teV9ob3N0X2lwX21h
      cC5nZXQoaG9zdF9uYW1lLCAiIikKICAgICAgICBpZiBub3QgaG9zdF9pcDoKICAgICAgICAgICAg
      aG9zdF9pcCA9ICIxNzIuOS57fS57fSIuZm9ybWF0KAogICAgICAgICAgICAgICAgcmFuZG9tLnJh
      bmRpbnQoMCwgMjU0KSwgcmFuZG9tLnJhbmRpbnQoMCwgMjU0KSkKICAgICAgICAgICAgc2VsZi5k
      dW1teV9ob3N0X2lwX21hcFtob3N0X25hbWVdID0gaG9zdF9pcAogICAgICAgIGRlbCByYW5kb20K
      ICAgICAgICByZXR1cm4gaG9zdF9pcAoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIFJhZG9zKGNv
      bmZmaWxlPU5vbmUpOgogICAgICAgIHJldHVybiBEdW1teVJhZG9zKCkKCgpjbGFzcyBSYWRvc0pT
      T046CiAgICBFWFRFUk5BTF9VU0VSX05BTUUgPSAiY2xpZW50LmhlYWx0aGNoZWNrZXIiCiAgICBF
      TVBUWV9PVVRQVVRfTElTVCA9ICJFbXB0eSBvdXRwdXQgbGlzdCIKICAgIERFRkFVTFRfUkdXX1BP
      T0xfUFJFRklYID0gImRlZmF1bHQiCiAgICBERUZBVUxUX01PTklUT1JJTkdfRU5EUE9JTlRfUE9S
      VCA9ICI5MjgzIgoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGdlbl9hcmdfcGFyc2VyKGNscywg
      YXJnc190b19wYXJzZT1Ob25lKToKICAgICAgICBhcmdQID0gYXJncGFyc2UuQXJndW1lbnRQYXJz
      ZXIoKQoKICAgICAgICBjb21tb25fZ3JvdXAgPSBhcmdQLmFkZF9hcmd1bWVudF9ncm91cCgnY29t
      bW9uJykKICAgICAgICBjb21tb25fZ3JvdXAuYWRkX2FyZ3VtZW50KCItLXZlcmJvc2UiLCAiLXYi
      LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uPSdzdG9yZV90cnVlJywg
      ZGVmYXVsdD1GYWxzZSkKICAgICAgICBjb21tb25fZ3JvdXAuYWRkX2FyZ3VtZW50KCItLWNlcGgt
      Y29uZiIsICItYyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJQcm92
      aWRlIGEgY2VwaCBjb25mIGZpbGUuIiwgdHlwZT1zdHIpCiAgICAgICAgY29tbW9uX2dyb3VwLmFk
      ZF9hcmd1bWVudCgiLS1ydW4tYXMtdXNlciIsICItdSIsIGRlZmF1bHQ9IiIsIHR5cGU9c3RyLAog
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0iUHJvdmlkZXMgYSB1c2VyIG5h
      bWUgdG8gY2hlY2sgdGhlIGNsdXN0ZXIncyBoZWFsdGggc3RhdHVzLCBtdXN0IGJlIHByZWZpeGVk
      IGJ5ICdjbGllbnQuJyIpCiAgICAgICAgY29tbW9uX2dyb3VwLmFkZF9hcmd1bWVudCgiLS1jbHVz
      dGVyLW5hbWUiLCBkZWZhdWx0PSJvcGVuc2hpZnQtc3RvcmFnZSIsCiAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICBoZWxwPSJDZXBoIGNsdXN0ZXIgbmFtZSIpCiAgICAgICAgY29tbW9u
      X2dyb3VwLmFkZF9hcmd1bWVudCgiLS1uYW1lc3BhY2UiLCBkZWZhdWx0PSIiLAogICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0iTmFtZXNwYWNlIHdoZXJlIENlcGhDbHVzdGVy
      IGlzIHJ1bm5pbmciKQogICAgICAgIGNvbW1vbl9ncm91cC5hZGRfYXJndW1lbnQoIi0tcmd3LXBv
      b2wtcHJlZml4IiwgZGVmYXVsdD0iIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
      IGhlbHA9IlJHVyBQb29sIHByZWZpeCIpCgogICAgICAgIG91dHB1dF9ncm91cCA9IGFyZ1AuYWRk
      X2FyZ3VtZW50X2dyb3VwKCdvdXRwdXQnKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRfYXJndW1l
      bnQoIi0tZm9ybWF0IiwgIi10IiwgY2hvaWNlcz1bImpzb24iLCAiYmFzaCJdLAogICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdD0nanNvbicsIGhlbHA9IlByb3ZpZGVzIHRo
      ZSBvdXRwdXQgZm9ybWF0IChqc29uIHwgYmFzaCkiKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRf
      YXJndW1lbnQoIi0tb3V0cHV0IiwgIi1vIiwgZGVmYXVsdD0iIiwKICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgIGhlbHA9Ik91dHB1dCB3aWxsIGJlIHN0b3JlZCBpbnRvIHRoZSBwcm92
      aWRlZCBmaWxlIikKICAgICAgICBvdXRwdXRfZ3JvdXAuYWRkX2FyZ3VtZW50KCItLWNlcGhmcy1m
      aWxlc3lzdGVtLW5hbWUiLCBkZWZhdWx0PSIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgaGVscD0iUHJvdmlkZXMgdGhlIG5hbWUgb2YgdGhlIENlcGggZmlsZXN5c3RlbSIpCiAg
      ICAgICAgb3V0cHV0X2dyb3VwLmFkZF9hcmd1bWVudCgiLS1jZXBoZnMtZGF0YS1wb29sLW5hbWUi
      LCBkZWZhdWx0PSIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0iUHJv
      dmlkZXMgdGhlIG5hbWUgb2YgdGhlIGNlcGhmcyBkYXRhIHBvb2wiKQogICAgICAgIG91dHB1dF9n
      cm91cC5hZGRfYXJndW1lbnQoIi0tcmJkLWRhdGEtcG9vbC1uYW1lIiwgZGVmYXVsdD0iIiwgcmVx
      dWlyZWQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJQcm92
      aWRlcyB0aGUgbmFtZSBvZiB0aGUgUkJEIGRhdGFwb29sIikKICAgICAgICBvdXRwdXRfZ3JvdXAu
      YWRkX2FyZ3VtZW50KCItLXJndy1lbmRwb2ludCIsIGRlZmF1bHQ9IiIsIHJlcXVpcmVkPUZhbHNl
      LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0iUmFkb3MgR2F0ZVdheSBl
      bmRwb2ludCAoaW4gPElQPjo8UE9SVD4gZm9ybWF0KSIpCiAgICAgICAgb3V0cHV0X2dyb3VwLmFk
      ZF9hcmd1bWVudCgiLS1tb25pdG9yaW5nLWVuZHBvaW50IiwgZGVmYXVsdD0iIiwgcmVxdWlyZWQ9
      RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJDZXBoIE1hbmFn
      ZXIgcHJvbWV0aGV1cyBleHBvcnRlciBlbmRwb2ludHMgKGNvbW1hIHNlcGFyYXRlZCBsaXN0IG9m
      IDxJUD4gZW50cmllcyBvZiBhY3RpdmUgYW5kIHN0YW5kYnkgbWdycykiKQogICAgICAgIG91dHB1
      dF9ncm91cC5hZGRfYXJndW1lbnQoIi0tbW9uaXRvcmluZy1lbmRwb2ludC1wb3J0IiwgZGVmYXVs
      dD0iIiwgcmVxdWlyZWQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBo
      ZWxwPSJDZXBoIE1hbmFnZXIgcHJvbWV0aGV1cyBleHBvcnRlciBwb3J0IikKCiAgICAgICAgdXBn
      cmFkZV9ncm91cCA9IGFyZ1AuYWRkX2FyZ3VtZW50X2dyb3VwKCd1cGdyYWRlJykKICAgICAgICB1
      cGdyYWRlX2dyb3VwLmFkZF9hcmd1bWVudCgiLS11cGdyYWRlIiwgYWN0aW9uPSdzdG9yZV90cnVl
      JywgZGVmYXVsdD1GYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxw
      PSJVcGdyYWRlcyB0aGUgJ3VzZXInIHdpdGggYWxsIHRoZSBwZXJtaXNzaW9ucyBuZWVkZWQgZm9y
      IHRoZSBuZXcgY2x1c3RlciB2ZXJzaW9uIikKCiAgICAgICAgaWYgYXJnc190b19wYXJzZToKICAg
      ICAgICAgICAgYXNzZXJ0IHR5cGUoYXJnc190b19wYXJzZSkgPT0gbGlzdCwgXAogICAgICAgICAg
      ICAgICAgIkFyZ3VtZW50IHRvICdnZW5fYXJnX3BhcnNlcicgc2hvdWxkIGJlIGEgbGlzdCIKICAg
      ICAgICBlbHNlOgogICAgICAgICAgICBhcmdzX3RvX3BhcnNlID0gc3lzLmFyZ3ZbMTpdCiAgICAg
      ICAgcmV0dXJuIGFyZ1AucGFyc2VfYXJncyhhcmdzX3RvX3BhcnNlKQoKICAgIGRlZiBfY2hlY2tf
      Y29uZmxpY3Rpbmdfb3B0aW9ucyhzZWxmKToKICAgICAgICBpZiBub3Qgc2VsZi5fYXJnX3BhcnNl
      ci51cGdyYWRlIGFuZCBub3Qgc2VsZi5fYXJnX3BhcnNlci5yYmRfZGF0YV9wb29sX25hbWU6CiAg
      ICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAg
      ICAiRWl0aGVyICctLXVwZ3JhZGUnIG9yICctLXJiZC1kYXRhLXBvb2wtbmFtZSA8cG9vbF9uYW1l
      Picgc2hvdWxkIGJlIHNwZWNpZmllZCIpCiAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci51cGdy
      YWRlIGFuZCBzZWxmLl9hcmdfcGFyc2VyLnJiZF9kYXRhX3Bvb2xfbmFtZToKICAgICAgICAgICAg
      cmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICJCb3RoICct
      LXVwZ3JhZGUnIGFuZCAnLS1yYmQtZGF0YS1wb29sLW5hbWUgPHBvb2xfbmFtZT4nIHNob3VsZCBu
      b3QgYmUgc3BlY2lmaWVkLCBjaG9vc2Ugb25seSBvbmUiKQogICAgICAgICMgYSB1c2VyIG5hbWUg
      bXVzdCBiZSBwcm92aWRlZCB3aGlsZSB1c2luZyAnLS11cGdyYWRlJyBvcHRpb24KICAgICAgICBp
      ZiBub3Qgc2VsZi5fYXJnX3BhcnNlci5ydW5fYXNfdXNlciBhbmQgc2VsZi5fYXJnX3BhcnNlci51
      cGdyYWRlOgogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAg
      ICAgICAgICAgICAgIlBsZWFzZSBwcm92aWRlIGFuIGV4aXN0aW5nIHVzZXItbmFtZSB0aHJvdWdo
      ICctLXJ1bi1hcy11c2VyJyAob3IgJy11JykgZmxhZyB3aGlsZSB1cGdyYWRpbmciKQoKICAgIGRl
      ZiBfaW52YWxpZF9lbmRwb2ludChzZWxmLCBlbmRwb2ludF9zdHIpOgogICAgICAgIHRyeToKICAg
      ICAgICAgICAgaXB2NCwgcG9ydCA9IGVuZHBvaW50X3N0ci5zcGxpdCgnOicpCiAgICAgICAgZXhj
      ZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRp
      b24oCiAgICAgICAgICAgICAgICAiTm90IGEgcHJvcGVyIGVuZHBvaW50OiB7fSwgPElQdjQ+OjxQ
      T1JUPiwgZm9ybWF0IGlzIGV4cGVjdGVkIi5mb3JtYXQoZW5kcG9pbnRfc3RyKSkKICAgICAgICBp
      cFBhcnRzID0gaXB2NC5zcGxpdCgnLicpCiAgICAgICAgaWYgbGVuKGlwUGFydHMpICE9IDQ6CiAg
      ICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAg
      ICAiTm90IGEgdmFsaWQgSVAgYWRkcmVzczoge30iLmZvcm1hdChpcHY0KSkKICAgICAgICBmb3Ig
      ZWFjaFBhcnQgaW4gaXBQYXJ0czoKICAgICAgICAgICAgaWYgbm90IGVhY2hQYXJ0LmlzZGlnaXQo
      KToKICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAg
      ICAgICAgICAgICAgICAgIklQIGFkZHJlc3MgcGFydHMgc2hvdWxkIGJlIG51bWJlcnM6IHt9Ii5m
      b3JtYXQoaXB2NCkpCiAgICAgICAgICAgIGludFBhcnQgPSBpbnQoZWFjaFBhcnQpCiAgICAgICAg
      ICAgIGlmIGludFBhcnQgPCAwIG9yIGludFBhcnQgPiAyNTQ6CiAgICAgICAgICAgICAgICByYWlz
      ZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICJPdXQgb2Yg
      cmFuZ2UgSVAgYWRkcmVzc2VzOiB7fSIuZm9ybWF0KGlwdjQpKQogICAgICAgIGlmIG5vdCBwb3J0
      LmlzZGlnaXQoKToKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigi
      UG9ydCBub3QgdmFsaWQ6IHt9Ii5mb3JtYXQocG9ydCkpCiAgICAgICAgaW50UG9ydCA9IGludChw
      b3J0KQogICAgICAgIGlmIGludFBvcnQgPCAxIG9yIGludFBvcnQgPiAyKioxNi0xOgogICAgICAg
      ICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgIk91
      dCBvZiByYW5nZSBwb3J0IG51bWJlcjoge30iLmZvcm1hdChwb3J0KSkKICAgICAgICByZXR1cm4g
      RmFsc2UKCiAgICBkZWYgZW5kcG9pbnRfZGlhbChzZWxmLCBlbmRwb2ludF9zdHIsIHRpbWVvdXQ9
      Myk6CiAgICAgICAgIyBpZiB0aGUgJ2NsdXN0ZXInIGluc3RhbmNlIGlzIGEgZHVtbXkgb25lLAog
      ICAgICAgICMgZG9uJ3QgdHJ5IHRvIHJlYWNoIG91dCB0byB0aGUgZW5kcG9pbnQKICAgICAgICBp
      ZiBpc2luc3RhbmNlKHNlbGYuY2x1c3RlciwgRHVtbXlSYWRvcyk6CiAgICAgICAgICAgIHJldHVy
      bgogICAgICAgIHByb3RvY29scyA9IFsiaHR0cCIsICJodHRwcyJdCiAgICAgICAgZm9yIHByZWZp
      eCBpbiBwcm90b2NvbHM6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGVwID0gInt9
      Oi8ve30iLmZvcm1hdChwcmVmaXgsIGVuZHBvaW50X3N0cikKICAgICAgICAgICAgICAgIHIgPSBy
      ZXF1ZXN0cy5oZWFkKGVwLCB0aW1lb3V0PXRpbWVvdXQpCiAgICAgICAgICAgICAgICBpZiByLnN0
      YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAg
      ZXhjZXB0OgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICByYWlzZSBFeGVjdXRpb25G
      YWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAidW5hYmxlIHRvIGNvbm5lY3QgdG8gZW5kcG9p
      bnQ6IHt9Ii5mb3JtYXQoZW5kcG9pbnRfc3RyKSkKCiAgICBkZWYgX19pbml0X18oc2VsZiwgYXJn
      X2xpc3Q9Tm9uZSk6CiAgICAgICAgc2VsZi5vdXRfbWFwID0ge30KICAgICAgICBzZWxmLl9leGNs
      dWRlZF9rZXlzID0gc2V0KCkKICAgICAgICBzZWxmLl9hcmdfcGFyc2VyID0gc2VsZi5nZW5fYXJn
      X3BhcnNlcihhcmdzX3RvX3BhcnNlPWFyZ19saXN0KQogICAgICAgIHNlbGYuX2NoZWNrX2NvbmZs
      aWN0aW5nX29wdGlvbnMoKQogICAgICAgIHNlbGYucnVuX2FzX3VzZXIgPSBzZWxmLl9hcmdfcGFy
      c2VyLnJ1bl9hc191c2VyCiAgICAgICAgc2VsZi5vdXRwdXRfZmlsZSA9IHNlbGYuX2FyZ19wYXJz
      ZXIub3V0cHV0CiAgICAgICAgc2VsZi5jZXBoX2NvbmYgPSBzZWxmLl9hcmdfcGFyc2VyLmNlcGhf
      Y29uZgogICAgICAgIHNlbGYuTUlOX1VTRVJfQ0FQX1BFUk1JU1NJT05TID0gewogICAgICAgICAg
      ICAnbWdyJzogJ2FsbG93IGNvbW1hbmQgY29uZmlnJywKICAgICAgICAgICAgJ21vbic6ICdhbGxv
      dyByLCBhbGxvdyBjb21tYW5kIHF1b3J1bV9zdGF0dXMsIGFsbG93IGNvbW1hbmQgdmVyc2lvbics
      CiAgICAgICAgICAgICdvc2QnOiAiYWxsb3cgcnd4IHBvb2w9ezB9LnJndy5tZXRhLCAiICsKICAg
      ICAgICAgICAgImFsbG93IHIgcG9vbD0ucmd3LnJvb3QsICIgKwogICAgICAgICAgICAiYWxsb3cg
      cncgcG9vbD17MH0ucmd3LmNvbnRyb2wsICIgKwogICAgICAgICAgICAiYWxsb3cgcnggcG9vbD17
      MH0ucmd3LmxvZywgIiArCiAgICAgICAgICAgICJhbGxvdyB4IHBvb2w9ezB9LnJndy5idWNrZXRz
      LmluZGV4IgogICAgICAgIH0KICAgICAgICAjIGlmIHVzZXIgbm90IHByb3ZpZGVkLCBnaXZlIGEg
      ZGVmYXVsdCB1c2VyCiAgICAgICAgaWYgbm90IHNlbGYucnVuX2FzX3VzZXIgYW5kIG5vdCBzZWxm
      Ll9hcmdfcGFyc2VyLnVwZ3JhZGU6CiAgICAgICAgICAgIHNlbGYucnVuX2FzX3VzZXIgPSBzZWxm
      LkVYVEVSTkFMX1VTRVJfTkFNRQogICAgICAgIGlmIG5vdCBzZWxmLl9hcmdfcGFyc2VyLnJnd19w
      b29sX3ByZWZpeCBhbmQgbm90IHNlbGYuX2FyZ19wYXJzZXIudXBncmFkZToKICAgICAgICAgICAg
      c2VsZi5fYXJnX3BhcnNlci5yZ3dfcG9vbF9wcmVmaXggPSBzZWxmLkRFRkFVTFRfUkdXX1BPT0xf
      UFJFRklYCiAgICAgICAgaWYgc2VsZi5jZXBoX2NvbmY6CiAgICAgICAgICAgIHNlbGYuY2x1c3Rl
      ciA9IHJhZG9zLlJhZG9zKGNvbmZmaWxlPXNlbGYuY2VwaF9jb25mKQogICAgICAgIGVsc2U6CiAg
      ICAgICAgICAgIHNlbGYuY2x1c3RlciA9IHJhZG9zLlJhZG9zKCkKICAgICAgICAgICAgc2VsZi5j
      bHVzdGVyLmNvbmZfcmVhZF9maWxlKCkKICAgICAgICBzZWxmLmNsdXN0ZXIuY29ubmVjdCgpCgog
      ICAgZGVmIHNodXRkb3duKHNlbGYpOgogICAgICAgIGlmIHNlbGYuY2x1c3Rlci5zdGF0ZSA9PSAi
      Y29ubmVjdGVkIjoKICAgICAgICAgICAgc2VsZi5jbHVzdGVyLnNodXRkb3duKCkKCiAgICBkZWYg
      Z2V0X2ZzaWQoc2VsZik6CiAgICAgICAgcmV0dXJuIHN0cihzZWxmLmNsdXN0ZXIuZ2V0X2ZzaWQo
      KSkKCiAgICBkZWYgX2NvbW1vbl9jbWRfanNvbl9nZW4oc2VsZiwgY21kX2pzb24pOgogICAgICAg
      IGNtZCA9IGpzb24uZHVtcHMoY21kX2pzb24sIHNvcnRfa2V5cz1UcnVlKQogICAgICAgIHJldF92
      YWwsIGNtZF9vdXQsIGVycl9tc2cgPSBzZWxmLmNsdXN0ZXIubW9uX2NvbW1hbmQoY21kLCBiJycp
      CiAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci52ZXJib3NlOgogICAgICAgICAgICBwcmludCgi
      Q29tbWFuZCBJbnB1dDoge30iLmZvcm1hdChjbWQpKQogICAgICAgICAgICBwcmludCgiUmV0dXJu
      IFZhbDoge31cbkNvbW1hbmQgT3V0cHV0OiB7fVxuRXJyb3IgTWVzc2FnZToge31cbi0tLS0tLS0t
      LS1cbiIuZm9ybWF0KAogICAgICAgICAgICAgICAgICByZXRfdmFsLCBjbWRfb3V0LCBlcnJfbXNn
      KSkKICAgICAgICBqc29uX291dCA9IHt9CiAgICAgICAgIyBpZiB0aGVyZSBpcyBubyBlcnJvciAo
      aS5lOyByZXRfdmFsIGlzIFpFUk8pIGFuZCAnY21kX291dCcgaXMgbm90IGVtcHR5CiAgICAgICAg
      IyB0aGVuIGNvbnZlcnQgJ2NtZF9vdXQnIHRvIGEganNvbiBvdXRwdXQKICAgICAgICBpZiByZXRf
      dmFsID09IDAgYW5kIGNtZF9vdXQ6CiAgICAgICAgICAgIGpzb25fb3V0ID0ganNvbi5sb2Fkcyhj
      bWRfb3V0KQogICAgICAgIHJldHVybiByZXRfdmFsLCBqc29uX291dCwgZXJyX21zZwoKICAgIGRl
      ZiBnZXRfY2VwaF9leHRlcm5hbF9tb25fZGF0YShzZWxmKToKICAgICAgICBjbWRfanNvbiA9IHsi
      cHJlZml4IjogInF1b3J1bV9zdGF0dXMiLCAiZm9ybWF0IjogImpzb24ifQogICAgICAgIHJldF92
      YWwsIGpzb25fb3V0LCBlcnJfbXNnID0gc2VsZi5fY29tbW9uX2NtZF9qc29uX2dlbihjbWRfanNv
      bikKICAgICAgICAjIGlmIHRoZXJlIGlzIGFuIHVuc3VjY2Vzc2Z1bCBhdHRlbXB0LAogICAgICAg
      IGlmIHJldF92YWwgIT0gMCBvciBsZW4oanNvbl9vdXQpID09IDA6CiAgICAgICAgICAgIHJhaXNl
      IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAiJ3F1b3J1bV9zdGF0
      dXMnIGNvbW1hbmQgZmFpbGVkLlxuIiArCiAgICAgICAgICAgICAgICAiRXJyb3I6IHt9Ii5mb3Jt
      YXQoZXJyX21zZyBpZiByZXRfdmFsICE9IDAgZWxzZSBzZWxmLkVNUFRZX09VVFBVVF9MSVNUKSkK
      ICAgICAgICBxX2xlYWRlcl9uYW1lID0ganNvbl9vdXRbJ3F1b3J1bV9sZWFkZXJfbmFtZSddCiAg
      ICAgICAgcV9sZWFkZXJfZGV0YWlscyA9IHt9CiAgICAgICAgcV9sZWFkZXJfbWF0Y2hpbmdfbGlz
      dCA9IFtsIGZvciBsIGluIGpzb25fb3V0Wydtb25tYXAnXVsnbW9ucyddCiAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICBpZiBsWyduYW1lJ10gPT0gcV9sZWFkZXJfbmFtZV0KICAgICAg
      ICBpZiBsZW4ocV9sZWFkZXJfbWF0Y2hpbmdfbGlzdCkgPT0gMDoKICAgICAgICAgICAgcmFpc2Ug
      RXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigiTm8gbWF0Y2hpbmcgJ21vbicgZGV0YWlscyBmb3Vu
      ZCIpCiAgICAgICAgcV9sZWFkZXJfZGV0YWlscyA9IHFfbGVhZGVyX21hdGNoaW5nX2xpc3RbMF0K
      ICAgICAgICBpcF9wb3J0ID0gc3RyKHFfbGVhZGVyX2RldGFpbHNbJ3B1YmxpY19hZGRyJ10uc3Bs
      aXQoJy8nKVswXSkKICAgICAgICByZXR1cm4gInt9PXt9Ii5mb3JtYXQoc3RyKHFfbGVhZGVyX25h
      bWUpLCBpcF9wb3J0KQoKICAgIGRlZiBfam9pbl9ob3N0X3BvcnQoc2VsZiwgZW5kcG9pbnQsIHBv
      cnQpOgogICAgICAgIHBvcnQgPSAie30iLmZvcm1hdChwb3J0KQogICAgICAgICMgcmVnZXggdG8g
      Y2hlY2sgdGhlIGdpdmVuIGVuZHBvaW50IGlzIGVuY2xvc2VkIGluIHNxdWFyZSBicmFja2V0cwog
      ICAgICAgIGlwdjZfcmVneCA9IHJlLmNvbXBpbGUocideXFtbXl1dKlxdJCcpCiAgICAgICAgIyBl
      bmRwb2ludCBoYXMgJzonIGluIGl0IGFuZCBpZiBub3QgKGFscmVhZHkpIGVuY2xvc2VkIGluIHNx
      dWFyZSBicmFja2V0cwogICAgICAgIGlmIGVuZHBvaW50LmNvdW50KCc6JykgYW5kIG5vdCBpcHY2
      X3JlZ3gubWF0Y2goZW5kcG9pbnQpOgogICAgICAgICAgICBlbmRwb2ludCA9ICdbe31dJy5mb3Jt
      YXQoZW5kcG9pbnQpCiAgICAgICAgaWYgbm90IHBvcnQ6CiAgICAgICAgICAgIHJldHVybiBlbmRw
      b2ludAogICAgICAgIHJldHVybiAnOicuam9pbihbZW5kcG9pbnQsIHBvcnRdKQoKICAgIGRlZiBf
      Y29udmVydF9ob3N0bmFtZV90b19pcChzZWxmLCBob3N0X25hbWUpOgogICAgICAgICMgaWYgJ2Ns
      dXN0ZXInIGluc3RhbmNlIGlzIGEgZHVtbXkgdHlwZSwKICAgICAgICAjIGNhbGwgdGhlIGR1bW15
      IGluc3RhbmNlJ3MgImNvbnZlcnQiIG1ldGhvZAogICAgICAgIGlmIG5vdCBob3N0X25hbWU6CiAg
      ICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oIkVtcHR5IGhvc3RuYW1l
      IHByb3ZpZGVkIikKICAgICAgICBpZiBpc2luc3RhbmNlKHNlbGYuY2x1c3RlciwgRHVtbXlSYWRv
      cyk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLmNsdXN0ZXIuX2NvbnZlcnRfaG9zdG5hbWVfdG9f
      aXAoaG9zdF9uYW1lKQogICAgICAgIGltcG9ydCBzb2NrZXQKICAgICAgICBpcCA9IHNvY2tldC5n
      ZXRob3N0YnluYW1lKGhvc3RfbmFtZSkKICAgICAgICBkZWwgc29ja2V0CiAgICAgICAgcmV0dXJu
      IGlwCgogICAgZGVmIGdldF9hY3RpdmVfYW5kX3N0YW5kYnlfbWdycyhzZWxmKToKICAgICAgICBt
      b25pdG9yaW5nX2VuZHBvaW50X3BvcnQgPSBzZWxmLl9hcmdfcGFyc2VyLm1vbml0b3JpbmdfZW5k
      cG9pbnRfcG9ydAogICAgICAgIG1vbml0b3JpbmdfZW5kcG9pbnRfaXAgPSBzZWxmLl9hcmdfcGFy
      c2VyLm1vbml0b3JpbmdfZW5kcG9pbnQKICAgICAgICBzdGFuZGJ5X21ncnMgPSBbXQogICAgICAg
      IGlmIG5vdCBtb25pdG9yaW5nX2VuZHBvaW50X2lwOgogICAgICAgICAgICBjbWRfanNvbiA9IHsi
      cHJlZml4IjogInN0YXR1cyIsICJmb3JtYXQiOiAianNvbiJ9CiAgICAgICAgICAgIHJldF92YWws
      IGpzb25fb3V0LCBlcnJfbXNnID0gc2VsZi5fY29tbW9uX2NtZF9qc29uX2dlbihjbWRfanNvbikK
      ICAgICAgICAgICAgIyBpZiB0aGVyZSBpcyBhbiB1bnN1Y2Nlc3NmdWwgYXR0ZW1wdCwKICAgICAg
      ICAgICAgaWYgcmV0X3ZhbCAhPSAwIG9yIGxlbihqc29uX291dCkgPT0gMDoKICAgICAgICAgICAg
      ICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAg
      IidtZ3Igc2VydmljZXMnIGNvbW1hbmQgZmFpbGVkLlxuIiArCiAgICAgICAgICAgICAgICAgICAg
      IkVycm9yOiB7fSIuZm9ybWF0KGVycl9tc2cgaWYgcmV0X3ZhbCAhPSAwIGVsc2Ugc2VsZi5FTVBU
      WV9PVVRQVVRfTElTVCkpCiAgICAgICAgICAgIG1vbml0b3JpbmdfZW5kcG9pbnQgPSBqc29uX291
      dC5nZXQoJ21ncm1hcCcsIHt9KS5nZXQoJ3NlcnZpY2VzJywge30pLmdldCgncHJvbWV0aGV1cycs
      ICcnKQogICAgICAgICAgICBpZiBub3QgbW9uaXRvcmluZ19lbmRwb2ludDoKICAgICAgICAgICAg
      ICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAg
      Iidwcm9tZXRoZXVzJyBzZXJ2aWNlIG5vdCBmb3VuZCwgaXMgdGhlIGV4cG9ydGVyIGVuYWJsZWQ/
      Jy5cbiIpCiAgICAgICAgICAgICMgbm93IGNoZWNrIHRoZSBzdGFuZC1ieSBtZ3ItcwogICAgICAg
      ICAgICBzdGFuZGJ5X2FyciA9IGpzb25fb3V0LmdldCgnbWdybWFwJyx7fSkuZ2V0KCdzdGFuZGJ5
      cycsIFtdKQogICAgICAgICAgICBmb3IgZWFjaF9zdGFuZGJ5IGluIHN0YW5kYnlfYXJyOgogICAg
      ICAgICAgICAgICAgaWYgJ25hbWUnIGluIGVhY2hfc3RhbmRieS5rZXlzKCk6CiAgICAgICAgICAg
      ICAgICAgICAgc3RhbmRieV9tZ3JzLmFwcGVuZChlYWNoX3N0YW5kYnlbJ25hbWUnXSkKICAgICAg
      ICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcGFyc2VkX2VuZHBvaW50ID0gdXJscGFyc2UobW9u
      aXRvcmluZ19lbmRwb2ludCkKICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAg
      ICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAg
      ICAgICJpbnZhbGlkIGVuZHBvaW50OiB7fSIuZm9ybWF0KG1vbml0b3JpbmdfZW5kcG9pbnQpKQog
      ICAgICAgICAgICBtb25pdG9yaW5nX2VuZHBvaW50X2lwID0gcGFyc2VkX2VuZHBvaW50Lmhvc3Ru
      YW1lCiAgICAgICAgICAgIGlmIG5vdCBtb25pdG9yaW5nX2VuZHBvaW50X3BvcnQ6CiAgICAgICAg
      ICAgICAgICBtb25pdG9yaW5nX2VuZHBvaW50X3BvcnQgPSAie30iLmZvcm1hdChwYXJzZWRfZW5k
      cG9pbnQucG9ydCkKCiAgICAgICAgIyBpZiBtb25pdG9yaW5nIGVuZHBvaW50IHBvcnQgaXMgbm90
      IHNldCwgcHV0IGEgZGVmYXVsdCBtb24gcG9ydAogICAgICAgIGlmIG5vdCBtb25pdG9yaW5nX2Vu
      ZHBvaW50X3BvcnQ6CiAgICAgICAgICAgIG1vbml0b3JpbmdfZW5kcG9pbnRfcG9ydCA9IHNlbGYu
      REVGQVVMVF9NT05JVE9SSU5HX0VORFBPSU5UX1BPUlQKCiAgICAgICAgdHJ5OgogICAgICAgICAg
      ICBmYWlsZWRfaXAgPSBtb25pdG9yaW5nX2VuZHBvaW50X2lwCiAgICAgICAgICAgIG1vbml0b3Jp
      bmdfZW5kcG9pbnRfaXAgPSBzZWxmLl9jb252ZXJ0X2hvc3RuYW1lX3RvX2lwKAogICAgICAgICAg
      ICAgICAgbW9uaXRvcmluZ19lbmRwb2ludF9pcCkKICAgICAgICAgICAgIyBjb2xsZWN0IGFsbCB0
      aGUgJ3N0YW5kLWJ5JyBtZ3IgaXBzCiAgICAgICAgICAgIG1ncl9pcHMgPSBbXQogICAgICAgICAg
      ICBmb3IgZWFjaF9zdGFuZGJ5X21nciBpbiBzdGFuZGJ5X21ncnM6CiAgICAgICAgICAgICAgICBm
      YWlsZWRfaXAgPSBlYWNoX3N0YW5kYnlfbWdyCiAgICAgICAgICAgICAgICBtZ3JfaXBzLmFwcGVu
      ZCgKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY29udmVydF9ob3N0bmFtZV90b19pcChl
      YWNoX3N0YW5kYnlfbWdyKSkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1
      dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAiQ29udmVyc2lvbiBvZiBob3N0
      OiB7fSB0byBJUCBmYWlsZWQuICJcCiAgICAgICAgICAgICAgICAiUGxlYXNlIGVudGVyIHRoZSBJ
      UCBhZGRyZXNzZXMgb2YgYWxsIHRoZSBjZXBoLW1ncnMgd2l0aCB0aGUgJy0tbW9uaXRvcmluZy1l
      bmRwb2ludCcgZmxhZyIuZm9ybWF0KGZhaWxlZF9pcCkpCiAgICAgICAgbW9uaXRvcmluZ19lbmRw
      b2ludCA9IHNlbGYuX2pvaW5faG9zdF9wb3J0KAogICAgICAgICAgICBtb25pdG9yaW5nX2VuZHBv
      aW50X2lwLCBtb25pdG9yaW5nX2VuZHBvaW50X3BvcnQpCiAgICAgICAgc2VsZi5faW52YWxpZF9l
      bmRwb2ludChtb25pdG9yaW5nX2VuZHBvaW50KQogICAgICAgIHNlbGYuZW5kcG9pbnRfZGlhbCht
      b25pdG9yaW5nX2VuZHBvaW50KQoKICAgICAgICAjIGFkZCB0aGUgdmFsaWRhdGVkIGFjdGl2ZSBt
      Z3IgSVAgaW50byB0aGUgZmlyc3QgaW5kZXgKICAgICAgICBtZ3JfaXBzLmluc2VydCgwLCBtb25p
      dG9yaW5nX2VuZHBvaW50X2lwKQogICAgICAgIGFsbF9tZ3JfaXBzX3N0ciA9ICIsIi5qb2luKG1n
      cl9pcHMpCiAgICAgICAgcmV0dXJuIGFsbF9tZ3JfaXBzX3N0ciwgbW9uaXRvcmluZ19lbmRwb2lu
      dF9wb3J0CgogICAgZGVmIGNyZWF0ZV9jZXBoQ1NJS2V5cmluZ19jZXBoRlNQcm92aXNpb25lcihz
      ZWxmKToKICAgICAgICAnJycKICAgICAgICBjb21tYW5kOiBjZXBoIGF1dGggZ2V0LW9yLWNyZWF0
      ZSBjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25lciBtb24gJ2FsbG93IHInIG1nciAnYWxsb3cg
      cncnIG9zZCAnYWxsb3cgcncgdGFnIGNlcGhmcyBtZXRhZGF0YT0qJwogICAgICAgICcnJwogICAg
      ICAgIGNtZF9qc29uID0geyJwcmVmaXgiOiAiYXV0aCBnZXQtb3ItY3JlYXRlIiwKICAgICAgICAg
      ICAgICAgICAgICAiZW50aXR5IjogImNsaWVudC5jc2ktY2VwaGZzLXByb3Zpc2lvbmVyIiwKICAg
      ICAgICAgICAgICAgICAgICAiY2FwcyI6IFsibW9uIiwgImFsbG93IHIiLCAibWdyIiwgImFsbG93
      IHJ3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAib3NkIiwgImFsbG93IHJ3IHRhZyBj
      ZXBoZnMgbWV0YWRhdGE9KiJdLAogICAgICAgICAgICAgICAgICAgICJmb3JtYXQiOiAianNvbiJ9
      CiAgICAgICAgcmV0X3ZhbCwganNvbl9vdXQsIGVycl9tc2cgPSBzZWxmLl9jb21tb25fY21kX2pz
      b25fZ2VuKGNtZF9qc29uKQogICAgICAgICMgaWYgdGhlcmUgaXMgYW4gdW5zdWNjZXNzZnVsIGF0
      dGVtcHQsCiAgICAgICAgaWYgcmV0X3ZhbCAhPSAwIG9yIGxlbihqc29uX291dCkgPT0gMDoKICAg
      ICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAg
      ICInYXV0aCBnZXQtb3ItY3JlYXRlIGNsaWVudC5jc2ktY2VwaGZzLXByb3Zpc2lvbmVyJyBjb21t
      YW5kIGZhaWxlZC5cbiIgKwogICAgICAgICAgICAgICAgIkVycm9yOiB7fSIuZm9ybWF0KGVycl9t
      c2cgaWYgcmV0X3ZhbCAhPSAwIGVsc2Ugc2VsZi5FTVBUWV9PVVRQVVRfTElTVCkpCiAgICAgICAg
      cmV0dXJuIHN0cihqc29uX291dFswXVsna2V5J10pCgogICAgZGVmIGNyZWF0ZV9jZXBoQ1NJS2V5
      cmluZ19jZXBoRlNOb2RlKHNlbGYpOgogICAgICAgIGNtZF9qc29uID0geyJwcmVmaXgiOiAiYXV0
      aCBnZXQtb3ItY3JlYXRlIiwKICAgICAgICAgICAgICAgICAgICAiZW50aXR5IjogImNsaWVudC5j
      c2ktY2VwaGZzLW5vZGUiLAogICAgICAgICAgICAgICAgICAgICJjYXBzIjogWyJtb24iLCAiYWxs
      b3cgciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1nciIsICJhbGxvdyBydyIsCiAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgIm9zZCIsICJhbGxvdyBydyB0YWcgY2VwaGZzICo9
      KiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1kcyIsICJhbGxvdyBydyJdLAogICAg
      ICAgICAgICAgICAgICAgICJmb3JtYXQiOiAianNvbiJ9CiAgICAgICAgcmV0X3ZhbCwganNvbl9v
      dXQsIGVycl9tc2cgPSBzZWxmLl9jb21tb25fY21kX2pzb25fZ2VuKGNtZF9qc29uKQogICAgICAg
      ICMgaWYgdGhlcmUgaXMgYW4gdW5zdWNjZXNzZnVsIGF0dGVtcHQsCiAgICAgICAgaWYgcmV0X3Zh
      bCAhPSAwIG9yIGxlbihqc29uX291dCkgPT0gMDoKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9u
      RmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICInYXV0aCBnZXQtb3ItY3JlYXRlIGNs
      aWVudC5jc2ktY2VwaGZzLW5vZGUnIGNvbW1hbmQgZmFpbGVkLlxuIiArCiAgICAgICAgICAgICAg
      ICAiRXJyb3I6IHt9Ii5mb3JtYXQoZXJyX21zZyBpZiByZXRfdmFsICE9IDAgZWxzZSBzZWxmLkVN
      UFRZX09VVFBVVF9MSVNUKSkKICAgICAgICByZXR1cm4gc3RyKGpzb25fb3V0WzBdWydrZXknXSkK
      CiAgICBkZWYgY3JlYXRlX2NlcGhDU0lLZXlyaW5nX1JCRFByb3Zpc2lvbmVyKHNlbGYpOgogICAg
      ICAgIGNtZF9qc29uID0geyJwcmVmaXgiOiAiYXV0aCBnZXQtb3ItY3JlYXRlIiwKICAgICAgICAg
      ICAgICAgICAgICAiZW50aXR5IjogImNsaWVudC5jc2ktcmJkLXByb3Zpc2lvbmVyIiwKICAgICAg
      ICAgICAgICAgICAgICAiY2FwcyI6IFsibW9uIiwgInByb2ZpbGUgcmJkIiwKICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAibWdyIiwgImFsbG93IHJ3IiwKICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAib3NkIiwgInByb2ZpbGUgcmJkIl0sCiAgICAgICAgICAgICAgICAgICAgImZvcm1h
      dCI6ICJqc29uIn0KICAgICAgICByZXRfdmFsLCBqc29uX291dCwgZXJyX21zZyA9IHNlbGYuX2Nv
      bW1vbl9jbWRfanNvbl9nZW4oY21kX2pzb24pCiAgICAgICAgIyBpZiB0aGVyZSBpcyBhbiB1bnN1
      Y2Nlc3NmdWwgYXR0ZW1wdCwKICAgICAgICBpZiByZXRfdmFsICE9IDAgb3IgbGVuKGpzb25fb3V0
      KSA9PSAwOgogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAg
      ICAgICAgICAgICAgIidhdXRoIGdldC1vci1jcmVhdGUgY2xpZW50LmNzaS1yYmQtcHJvdmlzaW9u
      ZXInIGNvbW1hbmQgZmFpbGVkLlxuIiArCiAgICAgICAgICAgICAgICAiRXJyb3I6IHt9Ii5mb3Jt
      YXQoZXJyX21zZyBpZiByZXRfdmFsICE9IDAgZWxzZSBzZWxmLkVNUFRZX09VVFBVVF9MSVNUKSkK
      ICAgICAgICByZXR1cm4gc3RyKGpzb25fb3V0WzBdWydrZXknXSkKCiAgICBkZWYgZ2V0X2NlcGhm
      c19kYXRhX3Bvb2xfZGV0YWlscyhzZWxmKToKICAgICAgICBjbWRfanNvbiA9IHsicHJlZml4Ijog
      ImZzIGxzIiwgImZvcm1hdCI6ICJqc29uIn0KICAgICAgICByZXRfdmFsLCBqc29uX291dCwgZXJy
      X21zZyA9IHNlbGYuX2NvbW1vbl9jbWRfanNvbl9nZW4oY21kX2pzb24pCiAgICAgICAgIyBpZiB0
      aGVyZSBpcyBhbiB1bnN1Y2Nlc3NmdWwgYXR0ZW1wdCwgcmVwb3J0IGFuIGVycm9yCiAgICAgICAg
      aWYgcmV0X3ZhbCAhPSAwOgogICAgICAgICAgICAjIGlmIGZzIGFuZCBkYXRhX3Bvb2wgYXJndW1l
      bnRzIGFyZSBub3Qgc2V0LCBzaWxlbnRseSByZXR1cm4KICAgICAgICAgICAgaWYgc2VsZi5fYXJn
      X3BhcnNlci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1lID09ICIiIGFuZCBzZWxmLl9hcmdfcGFyc2Vy
      LmNlcGhmc19kYXRhX3Bvb2xfbmFtZSA9PSAiIjoKICAgICAgICAgICAgICAgIHJldHVybgogICAg
      ICAgICAgICAjIGlmIHVzZXIgaGFzIHByb3ZpZGVkIGFueSBvZiB0aGUKICAgICAgICAgICAgIyAn
      LS1jZXBoZnMtZmlsZXN5c3RlbS1uYW1lJyBvciAnLS1jZXBoZnMtZGF0YS1wb29sLW5hbWUnIGFy
      Z3VtZW50cywKICAgICAgICAgICAgIyByYWlzZSBhbiBleGNlcHRpb24gYXMgd2UgYXJlIHVuYWJs
      ZSB0byB2ZXJpZnkgdGhlIGFyZ3MKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4
      Y2VwdGlvbigKICAgICAgICAgICAgICAgICInZnMgbHMnIGNlcGggY2FsbCBmYWlsZWQgd2l0aCBl
      cnJvcjoge30iLmZvcm1hdChlcnJfbXNnKSkKCiAgICAgICAgbWF0Y2hpbmdfanNvbl9vdXQgPSB7
      fQogICAgICAgICMgaWYgJy0tY2VwaGZzLWZpbGVzeXN0ZW0tbmFtZScgYXJndW1lbnQgaXMgcHJv
      dmlkZWQsCiAgICAgICAgIyBjaGVjayB3aGV0aGVyIHRoZSBwcm92aWRlZCBmaWxlc3lzdGVtLW5h
      bWUgZXhpc3RzIG9yIG5vdAogICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2ZpbGVz
      eXN0ZW1fbmFtZToKICAgICAgICAgICAgIyBnZXQgdGhlIG1hdGNoaW5nIGxpc3QKICAgICAgICAg
      ICAgbWF0Y2hpbmdfanNvbl9vdXRfbGlzdCA9IFttYXRjaGVkIGZvciBtYXRjaGVkIGluIGpzb25f
      b3V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3RyKG1hdGNoZWRb
      J25hbWUnXSkgPT0gc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1lXQogICAg
      ICAgICAgICAjIHVuYWJsZSB0byBmaW5kIGEgbWF0Y2hpbmcgZnMtbmFtZSwgcmFpc2UgYW4gZXJy
      b3IKICAgICAgICAgICAgaWYgbGVuKG1hdGNoaW5nX2pzb25fb3V0X2xpc3QpID09IDA6CiAgICAg
      ICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAg
      ICAgICAgICgiRmlsZXN5c3RlbSBwcm92aWRlZCwgJ3t9JywgIiArCiAgICAgICAgICAgICAgICAg
      ICAgICJpcyBub3QgZm91bmQgaW4gdGhlIGZzLWxpc3Q6ICd7fSciKS5mb3JtYXQoCiAgICAgICAg
      ICAgICAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2ZpbGVzeXN0ZW1fbmFtZSwK
      ICAgICAgICAgICAgICAgICAgICAgICAgW3N0cih4WyduYW1lJ10pIGZvciB4IGluIGpzb25fb3V0
      XSkpCiAgICAgICAgICAgIG1hdGNoaW5nX2pzb25fb3V0ID0gbWF0Y2hpbmdfanNvbl9vdXRfbGlz
      dFswXQogICAgICAgICMgaWYgY2VwaGZzIGZpbGVzeXN0ZW0gbmFtZSBpcyBub3QgcHJvdmlkZWQs
      CiAgICAgICAgIyB0cnkgdG8gZ2V0IGEgZGVmYXVsdCBmcyBuYW1lIGJ5IGRvaW5nIHRoZSBmb2xs
      b3dpbmcKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIGEuIGNoZWNrIGlmIHRoZXJlIGlzIG9u
      bHkgb25lIGZpbGVzeXN0ZW0gaXMgcHJlc2VudAogICAgICAgICAgICBpZiBsZW4oanNvbl9vdXQp
      ID09IDE6CiAgICAgICAgICAgICAgICBtYXRjaGluZ19qc29uX291dCA9IGpzb25fb3V0WzBdCiAg
      ICAgICAgICAgICMgYi4gb3IgZWxzZSwgY2hlY2sgaWYgZGF0YV9wb29sIG5hbWUgaXMgcHJvdmlk
      ZWQKICAgICAgICAgICAgZWxpZiBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bvb2xfbmFt
      ZToKICAgICAgICAgICAgICAgICMgYW5kIGlmIHByZXNlbnQsIGNoZWNrIHdoZXRoZXIgdGhlcmUg
      ZXhpc3RzIGEgZnMgd2hpY2ggaGFzIHRoZSBkYXRhX3Bvb2wKICAgICAgICAgICAgICAgIGZvciBl
      YWNoSiBpbiBqc29uX291dDoKICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2Vy
      LmNlcGhmc19kYXRhX3Bvb2xfbmFtZSBpbiBlYWNoSlsnZGF0YV9wb29scyddOgogICAgICAgICAg
      ICAgICAgICAgICAgICBtYXRjaGluZ19qc29uX291dCA9IGVhY2hKCiAgICAgICAgICAgICAgICAg
      ICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAjIGlmIHRoZXJlIGlzIG5vIG1hdGNoaW5nIGZz
      IGV4aXN0cywgdGhhdCBtZWFucyBwcm92aWRlZCBkYXRhX3Bvb2wgbmFtZSBpcyBpbnZhbGlkCiAg
      ICAgICAgICAgICAgICBpZiBub3QgbWF0Y2hpbmdfanNvbl9vdXQ6CiAgICAgICAgICAgICAgICAg
      ICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAg
      ICAgIlByb3ZpZGVkIGRhdGFfcG9vbCBuYW1lLCB7fSwgZG9lcyBub3QgZXhpc3RzIi5mb3JtYXQo
      CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19kYXRh
      X3Bvb2xfbmFtZSkpCiAgICAgICAgICAgICMgYy4gaWYgbm90aGluZyBpcyBzZXQgYW5kIGNvdWxk
      bid0IGZpbmQgYSBkZWZhdWx0LAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIyBq
      dXN0IHJldHVybiBzaWxlbnRseQogICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIG1h
      dGNoaW5nX2pzb25fb3V0OgogICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19maWxl
      c3lzdGVtX25hbWUgPSBzdHIoCiAgICAgICAgICAgICAgICBtYXRjaGluZ19qc29uX291dFsnbmFt
      ZSddKQoKICAgICAgICBpZiB0eXBlKG1hdGNoaW5nX2pzb25fb3V0WydkYXRhX3Bvb2xzJ10pID09
      IGxpc3Q6CiAgICAgICAgICAgICMgaWYgdGhlIHVzZXIgaGFzIGFscmVhZHkgcHJvdmlkZWQgZGF0
      YS1wb29sLW5hbWUsCiAgICAgICAgICAgICMgdGhyb3VnaCAtLWNlcGhmcy1kYXRhLXBvb2wtbmFt
      ZQogICAgICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bvb2xfbmFtZToK
      ICAgICAgICAgICAgICAgICMgaWYgdGhlIHByb3ZpZGVkIG5hbWUgaXMgbm90IG1hdGNoaW5nIHdp
      dGggdGhlIG9uZSBpbiB0aGUgbGlzdAogICAgICAgICAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNl
      ci5jZXBoZnNfZGF0YV9wb29sX25hbWUgbm90IGluIG1hdGNoaW5nX2pzb25fb3V0WydkYXRhX3Bv
      b2xzJ106CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlv
      bigKICAgICAgICAgICAgICAgICAgICAgICAgInt9OiAne30nLCB7fToge30iLmZvcm1hdCgKICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICJQcm92aWRlZCBkYXRhLXBvb2wtbmFtZSIsCiAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bvb2xf
      bmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkb2Vzbid0IG1hdGNoIGZyb20gdGhl
      IGRhdGEtcG9vbHMnIGxpc3QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgW3N0cih4KSBm
      b3IgeCBpbiBtYXRjaGluZ19qc29uX291dFsnZGF0YV9wb29scyddXSkpCiAgICAgICAgICAgICMg
      aWYgZGF0YV9wb29sIG5hbWUgaXMgbm90IHByb3ZpZGVkLAogICAgICAgICAgICAjIHRoZW4gdHJ5
      IHRvIGZpbmQgYSBkZWZhdWx0IGRhdGEgcG9vbCBuYW1lCiAgICAgICAgICAgIGVsc2U6CiAgICAg
      ICAgICAgICAgICAjIGlmIG5vIGRhdGFfcG9vbHMgZXhpc3QsIHNpbGVudGx5IHJldHVybgogICAg
      ICAgICAgICAgICAgaWYgbGVuKG1hdGNoaW5nX2pzb25fb3V0WydkYXRhX3Bvb2xzJ10pID09IDA6
      CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICBzZWxmLl9hcmdfcGFy
      c2VyLmNlcGhmc19kYXRhX3Bvb2xfbmFtZSA9IHN0cigKICAgICAgICAgICAgICAgICAgICBtYXRj
      aGluZ19qc29uX291dFsnZGF0YV9wb29scyddWzBdKQogICAgICAgICAgICAjIGlmIHRoZXJlIGFy
      ZSBtb3JlIHRoYW4gb25lICdkYXRhX3Bvb2xzJyBleGlzdCwKICAgICAgICAgICAgIyB0aGVuIHdh
      cm4gdGhlIHVzZXIgdGhhdCB3ZSBhcmUgdXNpbmcgdGhlIHNlbGVjdGVkIG5hbWUKICAgICAgICAg
      ICAgaWYgbGVuKG1hdGNoaW5nX2pzb25fb3V0WydkYXRhX3Bvb2xzJ10pID4gMToKICAgICAgICAg
      ICAgICAgIHByaW50KCJ7fToge31cbnt9OiAne30nXG4iLmZvcm1hdCgKICAgICAgICAgICAgICAg
      ICAgICAiV0FSTklORzogTXVsdGlwbGUgZGF0YSBwb29scyBkZXRlY3RlZCIsCiAgICAgICAgICAg
      ICAgICAgICAgW3N0cih4KSBmb3IgeCBpbiBtYXRjaGluZ19qc29uX291dFsnZGF0YV9wb29scydd
      XSwKICAgICAgICAgICAgICAgICAgICAiVXNpbmcgdGhlIGRhdGEtcG9vbCIsCiAgICAgICAgICAg
      ICAgICAgICAgc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZGF0YV9wb29sX25hbWUpKQoKICAgIGRl
      ZiBjcmVhdGVfY2VwaENTSUtleXJpbmdfUkJETm9kZShzZWxmKToKICAgICAgICBjbWRfanNvbiA9
      IHsicHJlZml4IjogImF1dGggZ2V0LW9yLWNyZWF0ZSIsCiAgICAgICAgICAgICAgICAgICAgImVu
      dGl0eSI6ICJjbGllbnQuY3NpLXJiZC1ub2RlIiwKICAgICAgICAgICAgICAgICAgICAiY2FwcyI6
      IFsibW9uIiwgInByb2ZpbGUgcmJkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAib3Nk
      IiwgInByb2ZpbGUgcmJkIl0sCiAgICAgICAgICAgICAgICAgICAgImZvcm1hdCI6ICJqc29uIn0K
      ICAgICAgICByZXRfdmFsLCBqc29uX291dCwgZXJyX21zZyA9IHNlbGYuX2NvbW1vbl9jbWRfanNv
      bl9nZW4oY21kX2pzb24pCiAgICAgICAgIyBpZiB0aGVyZSBpcyBhbiB1bnN1Y2Nlc3NmdWwgYXR0
      ZW1wdCwKICAgICAgICBpZiByZXRfdmFsICE9IDAgb3IgbGVuKGpzb25fb3V0KSA9PSAwOgogICAg
      ICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAg
      IidhdXRoIGdldC1vci1jcmVhdGUgY2xpZW50LmNzaS1yYmQtbm9kZScgY29tbWFuZCBmYWlsZWRc
      biIgKwogICAgICAgICAgICAgICAgIkVycm9yOiB7fSIuZm9ybWF0KGVycl9tc2cgaWYgcmV0X3Zh
      bCAhPSAwIGVsc2Ugc2VsZi5FTVBUWV9PVVRQVVRfTElTVCkpCiAgICAgICAgcmV0dXJuIHN0cihq
      c29uX291dFswXVsna2V5J10pCgogICAgZGVmIGNyZWF0ZV9jaGVja2VyS2V5KHNlbGYpOgogICAg
      ICAgIGNtZF9qc29uID0geyJwcmVmaXgiOiAiYXV0aCBnZXQtb3ItY3JlYXRlIiwKICAgICAgICAg
      ICAgICAgICAgICAiZW50aXR5Ijogc2VsZi5ydW5fYXNfdXNlciwKICAgICAgICAgICAgICAgICAg
      ICAiY2FwcyI6IFsibW9uIiwgc2VsZi5NSU5fVVNFUl9DQVBfUEVSTUlTU0lPTlNbJ21vbiddLAog
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtZ3IiLCBzZWxmLk1JTl9VU0VSX0NBUF9QRVJN
      SVNTSU9OU1snbWdyJ10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm9zZCIsIHNlbGYu
      TUlOX1VTRVJfQ0FQX1BFUk1JU1NJT05TWydvc2QnXS5mb3JtYXQoc2VsZi5fYXJnX3BhcnNlci5y
      Z3dfcG9vbF9wcmVmaXgpXSwKICAgICAgICAgICAgICAgICAgICAiZm9ybWF0IjogImpzb24ifQog
      ICAgICAgIHJldF92YWwsIGpzb25fb3V0LCBlcnJfbXNnID0gc2VsZi5fY29tbW9uX2NtZF9qc29u
      X2dlbihjbWRfanNvbikKICAgICAgICAjIGlmIHRoZXJlIGlzIGFuIHVuc3VjY2Vzc2Z1bCBhdHRl
      bXB0LAogICAgICAgIGlmIHJldF92YWwgIT0gMCBvciBsZW4oanNvbl9vdXQpID09IDA6CiAgICAg
      ICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAi
      J2F1dGggZ2V0LW9yLWNyZWF0ZSB7fScgY29tbWFuZCBmYWlsZWRcbiIuZm9ybWF0KHNlbGYucnVu
      X2FzX3VzZXIpICsKICAgICAgICAgICAgICAgICJFcnJvcjoge30iLmZvcm1hdChlcnJfbXNnIGlm
      IHJldF92YWwgIT0gMCBlbHNlIHNlbGYuRU1QVFlfT1VUUFVUX0xJU1QpKQogICAgICAgIHJldHVy
      biBzdHIoanNvbl9vdXRbMF1bJ2tleSddKQoKICAgIGRlZiBfZ2VuX291dHB1dF9tYXAoc2VsZik6
      CiAgICAgICAgaWYgc2VsZi5vdXRfbWFwOgogICAgICAgICAgICByZXR1cm4KICAgICAgICBwb29s
      c190b192YWxpZGF0ZSA9IFtzZWxmLl9hcmdfcGFyc2VyLnJiZF9kYXRhX3Bvb2xfbmFtZV0KICAg
      ICAgICAjIGlmIHJnd19lbmRwb2ludCBpcyBwcm92aWRlZCwgdmFsaWRhdGUgaXQKICAgICAgICBp
      ZiBzZWxmLl9hcmdfcGFyc2VyLnJnd19lbmRwb2ludDoKICAgICAgICAgICAgc2VsZi5faW52YWxp
      ZF9lbmRwb2ludChzZWxmLl9hcmdfcGFyc2VyLnJnd19lbmRwb2ludCkKICAgICAgICAgICAgc2Vs
      Zi5lbmRwb2ludF9kaWFsKHNlbGYuX2FyZ19wYXJzZXIucmd3X2VuZHBvaW50KQogICAgICAgICAg
      ICByZ3dfcG9vbF90b192YWxpZGF0ZSA9IFsiezB9LnJndy5tZXRhIi5mb3JtYXQoc2VsZi5fYXJn
      X3BhcnNlci5yZ3dfcG9vbF9wcmVmaXgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAiLnJndy5yb290IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInsw
      fS5yZ3cuY29udHJvbCIuZm9ybWF0KAogICAgICAgICAgICAgICAgc2VsZi5fYXJnX3BhcnNlci5y
      Z3dfcG9vbF9wcmVmaXgpLAogICAgICAgICAgICAgICAgInswfS5yZ3cubG9nIi5mb3JtYXQoCiAg
      ICAgICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLnJnd19wb29sX3ByZWZpeCldCiAgICAgICAg
      ICAgIHBvb2xzX3RvX3ZhbGlkYXRlLmV4dGVuZChyZ3dfcG9vbF90b192YWxpZGF0ZSkKICAgICAg
      ICBmb3IgcG9vbCBpbiBwb29sc190b192YWxpZGF0ZToKICAgICAgICAgICAgaWYgbm90IHNlbGYu
      Y2x1c3Rlci5wb29sX2V4aXN0cyhwb29sKToKICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlv
      bkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgIlRoZSBwcm92aWRlZCBwb29s
      LCAne30nLCBkb2VzIG5vdCBleGlzdCIuZm9ybWF0KHBvb2wpKQogICAgICAgIHNlbGYuX2V4Y2x1
      ZGVkX2tleXMuYWRkKCdDTFVTVEVSX05BTUUnKQogICAgICAgIHNlbGYuZ2V0X2NlcGhmc19kYXRh
      X3Bvb2xfZGV0YWlscygpCiAgICAgICAgc2VsZi5vdXRfbWFwWydOQU1FU1BBQ0UnXSA9IHNlbGYu
      X2FyZ19wYXJzZXIubmFtZXNwYWNlCiAgICAgICAgc2VsZi5vdXRfbWFwWydDTFVTVEVSX05BTUUn
      XSA9IHNlbGYuX2FyZ19wYXJzZXIuY2x1c3Rlcl9uYW1lCiAgICAgICAgc2VsZi5vdXRfbWFwWydS
      T09LX0VYVEVSTkFMX0ZTSUQnXSA9IHNlbGYuZ2V0X2ZzaWQoKQogICAgICAgIHNlbGYub3V0X21h
      cFsnUk9PS19FWFRFUk5BTF9VU0VSTkFNRSddID0gc2VsZi5ydW5fYXNfdXNlcgogICAgICAgIHNl
      bGYub3V0X21hcFsnUk9PS19FWFRFUk5BTF9DRVBIX01PTl9EQVRBJ10gPSBzZWxmLmdldF9jZXBo
      X2V4dGVybmFsX21vbl9kYXRhKCkKICAgICAgICBzZWxmLm91dF9tYXBbJ1JPT0tfRVhURVJOQUxf
      VVNFUl9TRUNSRVQnXSA9IHNlbGYuY3JlYXRlX2NoZWNrZXJLZXkoKQogICAgICAgIHNlbGYub3V0
      X21hcFsnQ1NJX1JCRF9OT0RFX1NFQ1JFVF9TRUNSRVQnXSA9IHNlbGYuY3JlYXRlX2NlcGhDU0lL
      ZXlyaW5nX1JCRE5vZGUoKQogICAgICAgIHNlbGYub3V0X21hcFsnQ1NJX1JCRF9QUk9WSVNJT05F
      Ul9TRUNSRVQnXSA9IHNlbGYuY3JlYXRlX2NlcGhDU0lLZXlyaW5nX1JCRFByb3Zpc2lvbmVyKCkK
      ICAgICAgICBzZWxmLm91dF9tYXBbJ0NFUEhGU19QT09MX05BTUUnXSA9IHNlbGYuX2FyZ19wYXJz
      ZXIuY2VwaGZzX2RhdGFfcG9vbF9uYW1lCiAgICAgICAgc2VsZi5vdXRfbWFwWydDRVBIRlNfRlNf
      TkFNRSddID0gc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1lCiAgICAgICAg
      c2VsZi5vdXRfbWFwWydDU0lfQ0VQSEZTX05PREVfU0VDUkVUJ10gPSAnJwogICAgICAgIHNlbGYu
      b3V0X21hcFsnQ1NJX0NFUEhGU19QUk9WSVNJT05FUl9TRUNSRVQnXSA9ICcnCiAgICAgICAgIyBj
      cmVhdGUgQ2VwaEZTIG5vZGUgYW5kIHByb3Zpc2lvbmVyIGtleXJpbmcgb25seSB3aGVuIE1EUyBl
      eGlzdHMKICAgICAgICBpZiBzZWxmLm91dF9tYXBbJ0NFUEhGU19GU19OQU1FJ10gYW5kIHNlbGYu
      b3V0X21hcFsnQ0VQSEZTX1BPT0xfTkFNRSddOgogICAgICAgICAgICBzZWxmLm91dF9tYXBbJ0NT
      SV9DRVBIRlNfTk9ERV9TRUNSRVQnXSA9IHNlbGYuY3JlYXRlX2NlcGhDU0lLZXlyaW5nX2NlcGhG
      U05vZGUoCiAgICAgICAgICAgICkKICAgICAgICAgICAgc2VsZi5vdXRfbWFwWydDU0lfQ0VQSEZT
      X1BST1ZJU0lPTkVSX1NFQ1JFVCddID0gc2VsZi5jcmVhdGVfY2VwaENTSUtleXJpbmdfY2VwaEZT
      UHJvdmlzaW9uZXIoKQogICAgICAgIHNlbGYub3V0X21hcFsnUkdXX0VORFBPSU5UJ10gPSBzZWxm
      Ll9hcmdfcGFyc2VyLnJnd19lbmRwb2ludAogICAgICAgIHNlbGYub3V0X21hcFsnTU9OSVRPUklO
      R19FTkRQT0lOVCddLCBcCiAgICAgICAgICAgIHNlbGYub3V0X21hcFsnTU9OSVRPUklOR19FTkRQ
      T0lOVF9QT1JUJ10gPSBzZWxmLmdldF9hY3RpdmVfYW5kX3N0YW5kYnlfbWdycygpCiAgICAgICAg
      c2VsZi5vdXRfbWFwWydSQkRfUE9PTF9OQU1FJ10gPSBzZWxmLl9hcmdfcGFyc2VyLnJiZF9kYXRh
      X3Bvb2xfbmFtZQogICAgICAgIHNlbGYub3V0X21hcFsnUkdXX1BPT0xfUFJFRklYJ10gPSBzZWxm
      Ll9hcmdfcGFyc2VyLnJnd19wb29sX3ByZWZpeAoKICAgIGRlZiBnZW5fc2hlbGxfb3V0KHNlbGYp
      OgogICAgICAgIHNlbGYuX2dlbl9vdXRwdXRfbWFwKCkKICAgICAgICBzaE91dElPID0gU3RyaW5n
      SU8oKQogICAgICAgIGZvciBrLCB2IGluIHNlbGYub3V0X21hcC5pdGVtcygpOgogICAgICAgICAg
      ICBpZiB2IGFuZCBrIG5vdCBpbiBzZWxmLl9leGNsdWRlZF9rZXlzOgogICAgICAgICAgICAgICAg
      c2hPdXRJTy53cml0ZSgnZXhwb3J0IHt9PXt9e30nLmZvcm1hdChrLCB2LCBMSU5FU0VQKSkKICAg
      ICAgICBzaE91dCA9IHNoT3V0SU8uZ2V0dmFsdWUoKQogICAgICAgIHNoT3V0SU8uY2xvc2UoKQog
      ICAgICAgIHJldHVybiBzaE91dAoKICAgIGRlZiBnZW5fanNvbl9vdXQoc2VsZik6CiAgICAgICAg
      c2VsZi5fZ2VuX291dHB1dF9tYXAoKQogICAgICAgIGpzb25fb3V0ID0gWwogICAgICAgICAgICB7
      CiAgICAgICAgICAgICAgICAibmFtZSI6ICJyb29rLWNlcGgtbW9uLWVuZHBvaW50cyIsCiAgICAg
      ICAgICAgICAgICAia2luZCI6ICJDb25maWdNYXAiLAogICAgICAgICAgICAgICAgImRhdGEiOiB7
      CiAgICAgICAgICAgICAgICAgICAgImRhdGEiOiBzZWxmLm91dF9tYXBbJ1JPT0tfRVhURVJOQUxf
      Q0VQSF9NT05fREFUQSddLAogICAgICAgICAgICAgICAgICAgICJtYXhNb25JZCI6ICIwIiwKICAg
      ICAgICAgICAgICAgICAgICAibWFwcGluZyI6ICJ7fSIKICAgICAgICAgICAgICAgIH0KICAgICAg
      ICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgIm5hbWUiOiAicm9vay1jZXBo
      LW1vbiIsCiAgICAgICAgICAgICAgICAia2luZCI6ICJTZWNyZXQiLAogICAgICAgICAgICAgICAg
      ImRhdGEiOiB7CiAgICAgICAgICAgICAgICAgICAgImFkbWluLXNlY3JldCI6ICJhZG1pbi1zZWNy
      ZXQiLAogICAgICAgICAgICAgICAgICAgICJmc2lkIjogc2VsZi5vdXRfbWFwWydST09LX0VYVEVS
      TkFMX0ZTSUQnXSwKICAgICAgICAgICAgICAgICAgICAibW9uLXNlY3JldCI6ICJtb24tc2VjcmV0
      IgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAg
      ICAgICAgICAgIm5hbWUiOiAicm9vay1jZXBoLW9wZXJhdG9yLWNyZWRzIiwKICAgICAgICAgICAg
      ICAgICJraW5kIjogIlNlY3JldCIsCiAgICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAg
      ICAgICAgICAgICAidXNlcklEIjogc2VsZi5vdXRfbWFwWydST09LX0VYVEVSTkFMX1VTRVJOQU1F
      J10sCiAgICAgICAgICAgICAgICAgICAgInVzZXJLZXkiOiBzZWxmLm91dF9tYXBbJ1JPT0tfRVhU
      RVJOQUxfVVNFUl9TRUNSRVQnXQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAg
      ICAgICAgICB7CiAgICAgICAgICAgICAgICAibmFtZSI6ICJyb29rLWNzaS1yYmQtbm9kZSIsCiAg
      ICAgICAgICAgICAgICAia2luZCI6ICJTZWNyZXQiLAogICAgICAgICAgICAgICAgImRhdGEiOiB7
      CiAgICAgICAgICAgICAgICAgICAgInVzZXJJRCI6ICdjc2ktcmJkLW5vZGUnLAogICAgICAgICAg
      ICAgICAgICAgICJ1c2VyS2V5Ijogc2VsZi5vdXRfbWFwWydDU0lfUkJEX05PREVfU0VDUkVUX1NF
      Q1JFVCddCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAg
      ICAgICAgICAgICAgICJuYW1lIjogImNlcGgtcmJkIiwKICAgICAgICAgICAgICAgICJraW5kIjog
      IlN0b3JhZ2VDbGFzcyIsCiAgICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAg
      ICAgICAicG9vbCI6IHNlbGYub3V0X21hcFsnUkJEX1BPT0xfTkFNRSddCiAgICAgICAgICAgICAg
      ICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICJuYW1lIjog
      Im1vbml0b3JpbmctZW5kcG9pbnQiLAogICAgICAgICAgICAgICAgImtpbmQiOiAiQ2VwaENsdXN0
      ZXIiLAogICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAgICAgICAgICAgICAgICAgIk1vbml0
      b3JpbmdFbmRwb2ludCI6IHNlbGYub3V0X21hcFsnTU9OSVRPUklOR19FTkRQT0lOVCddLAogICAg
      ICAgICAgICAgICAgICAgICJNb25pdG9yaW5nUG9ydCI6IHNlbGYub3V0X21hcFsnTU9OSVRPUklO
      R19FTkRQT0lOVF9QT1JUJ10KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAg
      IF0KCiAgICAgICAgIyBpZiAnQ1NJX1JCRF9QUk9WSVNJT05FUl9TRUNSRVQnIGV4aXN0cywgdGhl
      biBvbmx5IGFkZCAncm9vay1jc2ktcmJkLXByb3Zpc2lvbmVyJyBTZWNyZXQKICAgICAgICBpZiBz
      ZWxmLm91dF9tYXBbJ0NTSV9SQkRfUFJPVklTSU9ORVJfU0VDUkVUJ106CiAgICAgICAgICAgIGpz
      b25fb3V0LmFwcGVuZCh7CiAgICAgICAgICAgICAgICAibmFtZSI6ICJyb29rLWNzaS1yYmQtcHJv
      dmlzaW9uZXIiLAogICAgICAgICAgICAgICAgImtpbmQiOiAiU2VjcmV0IiwKICAgICAgICAgICAg
      ICAgICJkYXRhIjogewogICAgICAgICAgICAgICAgICAgICJ1c2VySUQiOiAnY3NpLXJiZC1wcm92
      aXNpb25lcicsCiAgICAgICAgICAgICAgICAgICAgInVzZXJLZXkiOiBzZWxmLm91dF9tYXBbJ0NT
      SV9SQkRfUFJPVklTSU9ORVJfU0VDUkVUJ10KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAg
      IH0pCiAgICAgICAgIyBpZiAnQ1NJX0NFUEhGU19QUk9WSVNJT05FUl9TRUNSRVQnIGV4aXN0cywg
      dGhlbiBvbmx5IGFkZCAncm9vay1jc2ktY2VwaGZzLXByb3Zpc2lvbmVyJyBTZWNyZXQKICAgICAg
      ICBpZiBzZWxmLm91dF9tYXBbJ0NTSV9DRVBIRlNfUFJPVklTSU9ORVJfU0VDUkVUJ106CiAgICAg
      ICAgICAgIGpzb25fb3V0LmFwcGVuZCh7CiAgICAgICAgICAgICAgICAibmFtZSI6ICJyb29rLWNz
      aS1jZXBoZnMtcHJvdmlzaW9uZXIiLAogICAgICAgICAgICAgICAgImtpbmQiOiAiU2VjcmV0IiwK
      ICAgICAgICAgICAgICAgICJkYXRhIjogewogICAgICAgICAgICAgICAgICAgICJhZG1pbklEIjog
      J2NzaS1jZXBoZnMtcHJvdmlzaW9uZXInLAogICAgICAgICAgICAgICAgICAgICJhZG1pbktleSI6
      IHNlbGYub3V0X21hcFsnQ1NJX0NFUEhGU19QUk9WSVNJT05FUl9TRUNSRVQnXQogICAgICAgICAg
      ICAgICAgfSwKICAgICAgICAgICAgfSkKICAgICAgICAjIGlmICdDU0lfQ0VQSEZTX05PREVfU0VD
      UkVUJyBleGlzdHMsIHRoZW4gb25seSBhZGQgJ3Jvb2stY3NpLWNlcGhmcy1ub2RlJyBTZWNyZXQK
      ICAgICAgICBpZiBzZWxmLm91dF9tYXBbJ0NTSV9DRVBIRlNfTk9ERV9TRUNSRVQnXToKICAgICAg
      ICAgICAganNvbl9vdXQuYXBwZW5kKHsKICAgICAgICAgICAgICAgICJuYW1lIjogInJvb2stY3Np
      LWNlcGhmcy1ub2RlIiwKICAgICAgICAgICAgICAgICJraW5kIjogIlNlY3JldCIsCiAgICAgICAg
      ICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAgICAgICAiYWRtaW5JRCI6ICdjc2ktY2Vw
      aGZzLW5vZGUnLAogICAgICAgICAgICAgICAgICAgICJhZG1pbktleSI6IHNlbGYub3V0X21hcFsn
      Q1NJX0NFUEhGU19OT0RFX1NFQ1JFVCddCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0p
      CiAgICAgICAgIyBpZiAnQ0VQSEZTX0ZTX05BTUUnIGV4aXN0cywgdGhlbiBvbmx5IGFkZCAnY2Vw
      aGZzJyBTdG9yYWdlQ2xhc3MKICAgICAgICBpZiBzZWxmLm91dF9tYXBbJ0NFUEhGU19GU19OQU1F
      J106CiAgICAgICAgICAgIGpzb25fb3V0LmFwcGVuZCh7CiAgICAgICAgICAgICAgICAibmFtZSI6
      ICJjZXBoZnMiLAogICAgICAgICAgICAgICAgImtpbmQiOiAiU3RvcmFnZUNsYXNzIiwKICAgICAg
      ICAgICAgICAgICJkYXRhIjogewogICAgICAgICAgICAgICAgICAgICJmc05hbWUiOiBzZWxmLm91
      dF9tYXBbJ0NFUEhGU19GU19OQU1FJ10sCiAgICAgICAgICAgICAgICAgICAgInBvb2wiOiBzZWxm
      Lm91dF9tYXBbJ0NFUEhGU19QT09MX05BTUUnXQogICAgICAgICAgICAgICAgfQogICAgICAgICAg
      ICB9KQogICAgICAgICMgaWYgJ1JHV19FTkRQT0lOVCcgZXhpc3RzLCB0aGVuIG9ubHkgYWRkICdj
      ZXBoLXJndycgU3RvcmFnZUNsYXNzCiAgICAgICAgaWYgc2VsZi5vdXRfbWFwWydSR1dfRU5EUE9J
      TlQnXToKICAgICAgICAgICAganNvbl9vdXQuYXBwZW5kKHsKICAgICAgICAgICAgICAgICJuYW1l
      IjogImNlcGgtcmd3IiwKICAgICAgICAgICAgICAgICJraW5kIjogIlN0b3JhZ2VDbGFzcyIsCiAg
      ICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAgICAgICAiZW5kcG9pbnQiOiBz
      ZWxmLm91dF9tYXBbJ1JHV19FTkRQT0lOVCddLAogICAgICAgICAgICAgICAgICAgICJwb29sUHJl
      Zml4Ijogc2VsZi5vdXRfbWFwWydSR1dfUE9PTF9QUkVGSVgnXQogICAgICAgICAgICAgICAgfQog
      ICAgICAgICAgICB9KQogICAgICAgIHJldHVybiBqc29uLmR1bXBzKGpzb25fb3V0KStMSU5FU0VQ
      CgogICAgZGVmIHVwZ3JhZGVfdXNlcl9wZXJtaXNzaW9ucyhzZWxmKToKICAgICAgICAjIGNoZWNr
      IHdoZXRoZXIgdGhlIGdpdmVuIHVzZXIgZXhpc3RzIG9yIG5vdAogICAgICAgIGNtZF9qc29uID0g
      eyJwcmVmaXgiOiAiYXV0aCBnZXQiLCAiZW50aXR5IjogInt9Ii5mb3JtYXQoCiAgICAgICAgICAg
      IHNlbGYucnVuX2FzX3VzZXIpLCAiZm9ybWF0IjogImpzb24ifQogICAgICAgIHJldF92YWwsIGpz
      b25fb3V0LCBlcnJfbXNnID0gc2VsZi5fY29tbW9uX2NtZF9qc29uX2dlbihjbWRfanNvbikKICAg
      ICAgICBpZiByZXRfdmFsICE9IDAgb3IgbGVuKGpzb25fb3V0KSA9PSAwOgogICAgICAgICAgICBy
      YWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKCInYXV0aCBnZXQge30nIGNvbW1hbmQgZmFp
      bGVkLlxuIi5mb3JtYXQoc2VsZi5ydW5fYXNfdXNlcikgKwogICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICJFcnJvcjoge30iLmZvcm1hdChlcnJfbXNnIGlmIHJldF92
      YWwgIT0gMCBlbHNlIHNlbGYuRU1QVFlfT1VUUFVUX0xJU1QpKQogICAgICAgIGpfZmlyc3QgPSBq
      c29uX291dFswXQogICAgICAgIGV4aXN0aW5nX2NhcHMgPSBqX2ZpcnN0WydjYXBzJ10KICAgICAg
      ICBvc2RfY2FwID0gIm9zZCIKICAgICAgICBjYXBfa2V5cyA9IFsibW9uIiwgIm1nciIsICJvc2Qi
      XQogICAgICAgIGZvciBlYWNoQ2FwIGluIGNhcF9rZXlzOgogICAgICAgICAgICBtaW5fY2FwX3Zh
      bHVlcyA9IHNlbGYuTUlOX1VTRVJfQ0FQX1BFUk1JU1NJT05TLmdldChlYWNoQ2FwLCAnJykKICAg
      ICAgICAgICAgY3VyX2NhcF92YWx1ZXMgPSBleGlzdGluZ19jYXBzLmdldChlYWNoQ2FwLCAnJykK
      ICAgICAgICAgICAgIyBkZXRlY3Qgcmd3LXBvb2wtcHJlZml4CiAgICAgICAgICAgIGlmIGVhY2hD
      YXAgPT0gb3NkX2NhcDoKICAgICAgICAgICAgICAgICMgaWYgZGlyZWN0bHkgcHJvdmlkZWQgdGhy
      b3VnaCAnLS1yZ3ctcG9vbC1wcmVmaXgnIGFyZ3VtZW50LCB1c2UgaXQKICAgICAgICAgICAgICAg
      IGlmIHNlbGYuX2FyZ19wYXJzZXIucmd3X3Bvb2xfcHJlZml4OgogICAgICAgICAgICAgICAgICAg
      IG1pbl9jYXBfdmFsdWVzID0gbWluX2NhcF92YWx1ZXMuZm9ybWF0KAogICAgICAgICAgICAgICAg
      ICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLnJnd19wb29sX3ByZWZpeCkKICAgICAgICAgICAgICAg
      ICMgb3IgZWxzZSB0cnkgdG8gZGV0ZWN0IG9uZSBmcm9tIHRoZSBleGlzdGluZy9jdXJyZW50IG9z
      ZCBjYXAgdmFsdWVzCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJj
      ID0gcmUuY29tcGlsZShyJyBwb29sPShbXi5dKylcLnJnd1wuW14gXSonKQogICAgICAgICAgICAg
      ICAgICAgICMgJ2ZpbmRhbGwoKScgbWV0aG9kIHdpbGwgZ2l2ZSBhIGxpc3Qgb2YgcHJlZml4ZXMK
      ICAgICAgICAgICAgICAgICAgICAjIGFuZCAnc2V0JyB3aWxsIGVsaW1pbmF0ZSBhbnkgZHVwbGlj
      YXRlcwogICAgICAgICAgICAgICAgICAgIGN1cl9yZ3dfcG9vbF9wcmVmaXhfbGlzdCA9IGxpc3Qo
      CiAgICAgICAgICAgICAgICAgICAgICAgIHNldChyYy5maW5kYWxsKGN1cl9jYXBfdmFsdWVzKSkp
      CiAgICAgICAgICAgICAgICAgICAgaWYgbGVuKGN1cl9yZ3dfcG9vbF9wcmVmaXhfbGlzdCkgIT0g
      MToKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlv
      bigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJVbmFibGUgdG8gZGV0ZXJtaW5lICdyZ3ct
      cG9vbC1wcmVmeCcuIFBsZWFzZSBwcm92aWRlIG9uZSB3aXRoICctLXJndy1wb29sLXByZWZpeCcg
      ZmxhZyIpCiAgICAgICAgICAgICAgICAgICAgbWluX2NhcF92YWx1ZXMgPSBtaW5fY2FwX3ZhbHVl
      cy5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cl9yZ3dfcG9vbF9wcmVmaXhfbGlz
      dFswXSkKICAgICAgICAgICAgY3VyX2NhcF9wZXJtX2xpc3QgPSBbeC5zdHJpcCgpCiAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB4IGluIGN1cl9jYXBfdmFsdWVzLnNwbGl0KCcs
      JykgaWYgeC5zdHJpcCgpXQogICAgICAgICAgICBtaW5fY2FwX3Blcm1fbGlzdCA9IFt4LnN0cmlw
      KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHggaW4gbWluX2NhcF92YWx1
      ZXMuc3BsaXQoJywnKSBpZiB4LnN0cmlwKCldCiAgICAgICAgICAgIG1pbl9jYXBfcGVybV9saXN0
      LmV4dGVuZChjdXJfY2FwX3Blcm1fbGlzdCkKICAgICAgICAgICAgIyBlbGltaW5hdGUgZHVwbGlj
      YXRlcyB3aXRob3V0IHVzaW5nICdzZXQnCiAgICAgICAgICAgICMgc2V0IHJlLW9yZGVycyBpdGVt
      cyBpbiB0aGUgbGlzdCBhbmQgd2UgaGF2ZSB0byBrZWVwIHRoZSBvcmRlcgogICAgICAgICAgICBu
      ZXdfY2FwX3Blcm1fbGlzdCA9IFtdCiAgICAgICAgICAgIFtuZXdfY2FwX3Blcm1fbGlzdC5hcHBl
      bmQoCiAgICAgICAgICAgICAgICB4KSBmb3IgeCBpbiBtaW5fY2FwX3Blcm1fbGlzdCBpZiB4IG5v
      dCBpbiBuZXdfY2FwX3Blcm1fbGlzdF0KICAgICAgICAgICAgZXhpc3RpbmdfY2Fwc1tlYWNoQ2Fw
      XSA9ICIsICIuam9pbihuZXdfY2FwX3Blcm1fbGlzdCkKICAgICAgICBjbWRfanNvbiA9IHsicHJl
      Zml4IjogImF1dGggY2FwcyIsCiAgICAgICAgICAgICAgICAgICAgImVudGl0eSI6IHNlbGYucnVu
      X2FzX3VzZXIsCiAgICAgICAgICAgICAgICAgICAgImNhcHMiOiBbIm1vbiIsIGV4aXN0aW5nX2Nh
      cHNbIm1vbiJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtZ3IiLCBleGlzdGluZ19j
      YXBzWyJtZ3IiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAib3NkIiwgZXhpc3Rpbmdf
      Y2Fwc1sib3NkIl1dLAogICAgICAgICAgICAgICAgICAgICJmb3JtYXQiOiAianNvbiJ9CiAgICAg
      ICAgcmV0X3ZhbCwganNvbl9vdXQsIGVycl9tc2cgPSBzZWxmLl9jb21tb25fY21kX2pzb25fZ2Vu
      KGNtZF9qc29uKQogICAgICAgIGlmIHJldF92YWwgIT0gMDoKICAgICAgICAgICAgcmFpc2UgRXhl
      Y3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigiJ2F1dGggY2FwcyB7fScgY29tbWFuZCBmYWlsZWQuXG4i
      LmZvcm1hdChzZWxmLnJ1bl9hc191c2VyKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgIkVycm9yOiB7fSIuZm9ybWF0KGVycl9tc2cpKQogICAgICAgIHByaW50
      KCJVcGRhdGVkIHVzZXIsIHt9LCBzdWNjZXNzZnVsbHkuIi5mb3JtYXQoc2VsZi5ydW5fYXNfdXNl
      cikpCgogICAgZGVmIG1haW4oc2VsZik6CiAgICAgICAgZ2VuZXJhdGVkX291dHB1dCA9ICcnCiAg
      ICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci51cGdyYWRlOgogICAgICAgICAgICBzZWxmLnVwZ3Jh
      ZGVfdXNlcl9wZXJtaXNzaW9ucygpCiAgICAgICAgZWxpZiBzZWxmLl9hcmdfcGFyc2VyLmZvcm1h
      dCA9PSAnanNvbic6CiAgICAgICAgICAgIGdlbmVyYXRlZF9vdXRwdXQgPSBzZWxmLmdlbl9qc29u
      X291dCgpCiAgICAgICAgZWxpZiBzZWxmLl9hcmdfcGFyc2VyLmZvcm1hdCA9PSAnYmFzaCc6CiAg
      ICAgICAgICAgIGdlbmVyYXRlZF9vdXRwdXQgPSBzZWxmLmdlbl9zaGVsbF9vdXQoKQogICAgICAg
      IGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oIlVuc3Vw
      cG9ydGVkIGZvcm1hdDoge30iLmZvcm1hdCgKICAgICAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJz
      ZXIuZm9ybWF0KSkKICAgICAgICBwcmludCgne30nLmZvcm1hdChnZW5lcmF0ZWRfb3V0cHV0KSkK
      ICAgICAgICBpZiBzZWxmLm91dHB1dF9maWxlIGFuZCBnZW5lcmF0ZWRfb3V0cHV0OgogICAgICAg
      ICAgICBmT3V0ID0gb3BlbihzZWxmLm91dHB1dF9maWxlLCAndycpCiAgICAgICAgICAgIGZPdXQu
      d3JpdGUoZ2VuZXJhdGVkX291dHB1dCkKICAgICAgICAgICAgZk91dC5jbG9zZSgpCgoKIyMjIyMj
      IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyMjIyMjIyMjIyMj
      IyMjIyMjIyBNQUlOICMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAg
      IHJqT2JqID0gUmFkb3NKU09OKCkKICAgIHRyeToKICAgICAgICByak9iai5tYWluKCkKICAgIGV4
      Y2VwdCBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uIGFzIGVycjoKICAgICAgICBwcmludCgiRXhl
      Y3V0aW9uIEZhaWxlZDoge30iLmZvcm1hdChlcnIpKQogICAgICAgIHJhaXNlIGVycgogICAgZXhj
      ZXB0IEtleUVycm9yIGFzIGtFcnI6CiAgICAgICAgcHJpbnQoIktleUVycm9yOiAlcyIsIGtFcnIp
      CiAgICBleGNlcHQgT1NFcnJvciBhcyBvc0VycjoKICAgICAgICBwcmludCgiRXJyb3Igd2hpbGUg
      dHJ5aW5nIHRvIG91dHB1dCB0aGUgZGF0YToge30iLmZvcm1hdChvc0VycikpCiAgICBmaW5hbGx5
      OgogICAgICAgIHJqT2JqLnNodXRkb3duKCkKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIFRFU1QgIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
      IyMjIwojIGlub3JkZXIgdG8gdGVzdCB0aGUgcGFja2FnZSwKIyBjZCA8c2NyaXB0X2RpcmVjdG9y
      eT4KIyBweXRob24gLW0gdW5pdHRlc3QgLS12ZXJib3NlIDxzY3JpcHRfbmFtZV93aXRob3V0X2Rv
      dF9weT4KY2xhc3MgVGVzdFJhZG9zSlNPTih1bml0dGVzdC5UZXN0Q2FzZSk6CiAgICBkZWYgc2V0
      VXAoc2VsZik6CiAgICAgICAgcHJpbnQoIlxuSSBhbSBpbiBzZXR1cCIpCiAgICAgICAgc2VsZi5y
      ak9iaiA9IFJhZG9zSlNPTihbJy0tcmJkLWRhdGEtcG9vbC1uYW1lPWFiYycsCiAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgJy0tcmd3LWVuZHBvaW50PTEwLjEwLjIxMi4xMjI6OTAwMCcs
      ICctLWZvcm1hdD1qc29uJ10pCiAgICAgICAgIyBmb3IgdGVzdGluZywgd2UgYXJlIHVzaW5nICdE
      dW1teVJhZG9zJyBvYmplY3QKICAgICAgICBzZWxmLnJqT2JqLmNsdXN0ZXIgPSBEdW1teVJhZG9z
      LlJhZG9zKCkKCiAgICBkZWYgdGVhckRvd24oc2VsZik6CiAgICAgICAgcHJpbnQoIlxuSSBhbSB0
      ZWFyaW5nIGRvd24gdGhlIHNldHVwXG4iKQogICAgICAgIHNlbGYucmpPYmouc2h1dGRvd24oKQoK
      ICAgIGRlZiB0ZXN0X21ldGhvZF9tYWluX291dHB1dChzZWxmKToKICAgICAgICBwcmludCgiSlNP
      TiBPdXRwdXQiKQogICAgICAgIHNlbGYucmpPYmouX2FyZ19wYXJzZXIuZm9ybWF0ID0gImpzb24i
      CiAgICAgICAgc2VsZi5yak9iai5tYWluKCkKICAgICAgICBwcmludCgiXG5cblNoZWxsIE91dHB1
      dCIpCiAgICAgICAgc2VsZi5yak9iai5fYXJnX3BhcnNlci5mb3JtYXQgPSAiYmFzaCIKICAgICAg
      ICBzZWxmLnJqT2JqLm1haW4oKQogICAgICAgIHByaW50KCJcblxuTm9uIGNvbXBhdGlibGUgb3V0
      cHV0ICgtLWFiY2QpIikKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYucmpPYmouX2FyZ19w
      YXJzZXIuZm9ybWF0ID0gJ2FiY2QnCiAgICAgICAgICAgIHNlbGYucmpPYmoubWFpbigpCiAgICAg
      ICAgICAgIHNlbGYuZmFpbCgiRnVuY3Rpb24gc2hvdWxkIGhhdmUgdGhyb3duIGFuIEV4Y2VwdGlv
      biIpCiAgICAgICAgZXhjZXB0IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24gYXMgZXJyOgogICAg
      ICAgICAgICBwcmludCgiRXhjZXB0aW9uIHRocm93biBzdWNjZXNzZnVsbHk6IHt9Ii5mb3JtYXQo
      ZXJyKSkKCiAgICBkZWYgdGVzdF9tZXRob2RfY3JlYXRlX2NlcGhDU0lLZXlyaW5nX2NlcGhGU1By
      b3Zpc2lvbmVyKHNlbGYpOgogICAgICAgIGNzaUtleXJpbmcgPSBzZWxmLnJqT2JqLmNyZWF0ZV9j
      ZXBoQ1NJS2V5cmluZ19jZXBoRlNQcm92aXNpb25lcigpCiAgICAgICAgcHJpbnQoInt9Ii5mb3Jt
      YXQoY3NpS2V5cmluZykpCgogICAgZGVmIHRlc3Rfbm9uX3plcm9fcmV0dXJuX2FuZF9lcnJvcihz
      ZWxmKToKICAgICAgICBzZWxmLnJqT2JqLmNsdXN0ZXIucmV0dXJuX3ZhbCA9IDEKICAgICAgICBz
      ZWxmLnJqT2JqLmNsdXN0ZXIuZXJyX21lc3NhZ2UgPSAiRHVtbXkgRXJyb3IiCiAgICAgICAgdHJ5
      OgogICAgICAgICAgICBzZWxmLnJqT2JqLmNyZWF0ZV9jaGVja2VyS2V5KCkKICAgICAgICAgICAg
      c2VsZi5mYWlsKCJGYWlsZWQgdG8gcmFpc2UgYW4gZXhjZXB0aW9uLCAnRXhlY3V0aW9uRmFpbHVy
      ZUV4Y2VwdGlvbiciKQogICAgICAgIGV4Y2VwdCBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uIGFz
      IGVycjoKICAgICAgICAgICAgcHJpbnQoIlN1Y2Nlc3NmdWxseSB0aHJvd24gZXJyb3IuXG5FcnJv
      cjoge30iLmZvcm1hdChlcnIpKQoKICAgIGRlZiB0ZXN0X211bHRpX2ZpbGVzeXN0ZW1fc2NlbmFy
      aW8oc2VsZik6CiAgICAgICAgY21kX2tleSA9IHNlbGYucmpPYmouY2x1c3Rlci5jbWRfbmFtZXNb
      J2ZzIGxzJ10KICAgICAgICBjbWRfb3V0ID0gc2VsZi5yak9iai5jbHVzdGVyLmNtZF9vdXRwdXRf
      bWFwW2NtZF9rZXldCiAgICAgICAgY21kX2pzb25fb3V0ID0ganNvbi5sb2FkcyhjbWRfb3V0KQog
      ICAgICAgIHNlY29uZF9mc19kZXRhaWxzID0gZGljdChjbWRfanNvbl9vdXRbMF0pCiAgICAgICAg
      c2Vjb25kX2ZzX2RldGFpbHNbJ25hbWUnXSArPSAnLTInCiAgICAgICAgY21kX2pzb25fb3V0LmFw
      cGVuZChzZWNvbmRfZnNfZGV0YWlscykKICAgICAgICBzZWxmLnJqT2JqLmNsdXN0ZXIuY21kX291
      dHB1dF9tYXBbY21kX2tleV0gPSBqc29uLmR1bXBzKGNtZF9qc29uX291dCkKICAgICAgICAjIG11
      bHRpcGxlIGZpbGVzeXN0ZW0gcHJlc2VudCwKICAgICAgICAjIGJ1dCBubyBzcGVjaWZpYyAnLS1j
      ZXBoZnMtZmlsZXN5c3RlbS1uYW1lJyBhcmd1bWVudCBwcm92aWRlZAogICAgICAgIHRyeToKICAg
      ICAgICAgICAgc2VsZi5yak9iai5nZXRfY2VwaGZzX2RhdGFfcG9vbF9kZXRhaWxzKCkKICAgICAg
      ICAgICAgcHJpbnQoIkFzIHdlIGFyZSByZXR1cm5pbmcgc2lsZW50bHksIG5vIGVycm9yIHRocm93
      biBhcyBleHBlY3RlZCIpCiAgICAgICAgZXhjZXB0IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24g
      YXMgZXJyOgogICAgICAgICAgICBzZWxmLmZhaWwoCiAgICAgICAgICAgICAgICAiU3VwcG9zZWQg
      dG8gZ2V0IHJldHVybmVkIHNpbGVudGx5LCBidXQgaW5zdGVhZCBlcnJvciB0aHJvd246IHt9Ii5m
      b3JtYXQoZXJyKSkKICAgICAgICAjIHBhc3MgYW4gZXhpc3RpbmcgZmlsZXN5c3RlbSBuYW1lCiAg
      ICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnJqT2JqLl9hcmdfcGFyc2VyLmNlcGhmc19maWxl
      c3lzdGVtX25hbWUgPSBzZWNvbmRfZnNfZGV0YWlsc1snbmFtZSddCiAgICAgICAgICAgIHNlbGYu
      cmpPYmouZ2V0X2NlcGhmc19kYXRhX3Bvb2xfZGV0YWlscygpCiAgICAgICAgZXhjZXB0IEV4ZWN1
      dGlvbkZhaWx1cmVFeGNlcHRpb24gYXMgZXJyOgogICAgICAgICAgICBzZWxmLmZhaWwoIlNob3Vs
      ZCBub3QgaGF2ZSB0aHJvd24gZXJyb3I6IHt9Ii5mb3JtYXQoZXJyKSkKICAgICAgICAjIHBhc3Mg
      YSBub24tZXhpc3RpbmcgZmlsZXN5c3RlbSBuYW1lCiAgICAgICAgdHJ5OgogICAgICAgICAgICBz
      ZWxmLnJqT2JqLl9hcmdfcGFyc2VyLmNlcGhmc19maWxlc3lzdGVtX25hbWUgKz0gIi1ub24tZXhp
      c3RpbmctZnMtbmFtZSIKICAgICAgICAgICAgc2VsZi5yak9iai5nZXRfY2VwaGZzX2RhdGFfcG9v
      bF9kZXRhaWxzKCkKICAgICAgICAgICAgc2VsZi5mYWlsKCJBbiBFeGNlcHRpb24gd2FzIGV4cGVj
      dGVkIHRvIGJlIHRocm93biIpCiAgICAgICAgZXhjZXB0IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRp
      b24gYXMgZXJyOgogICAgICAgICAgICBwcmludCgiU3VjY2Vzc2Z1bGx5IHRocm93biBlcnJvcjog
      e30iLmZvcm1hdChlcnIpKQogICAgICAgICMgZW1wdHkgZmlsZS1zeXN0ZW0gYXJyYXkKICAgICAg
      ICB0cnk6CiAgICAgICAgICAgIHNlbGYucmpPYmouY2x1c3Rlci5jbWRfb3V0cHV0X21hcFtjbWRf
      a2V5XSA9IGpzb24uZHVtcHMoW10pCiAgICAgICAgICAgIHNlbGYucmpPYmouZ2V0X2NlcGhmc19k
      YXRhX3Bvb2xfZGV0YWlscygpCiAgICAgICAgICAgIHNlbGYuZmFpbCgiQW4gRXhjZXB0aW9uIHdh
      cyBleHBlY3RlZCB0byBiZSB0aHJvd24iKQogICAgICAgIGV4Y2VwdCBFeGVjdXRpb25GYWlsdXJl
      RXhjZXB0aW9uIGFzIGVycjoKICAgICAgICAgICAgcHJpbnQoIlN1Y2Nlc3NmdWxseSB0aHJvd24g
      ZXJyb3I6IHt9Ii5mb3JtYXQoZXJyKSkKCiAgICBkZWYgdGVzdF9tdWx0aV9kYXRhX3Bvb2xfc2Nl
      bmFyaW8oc2VsZik6CiAgICAgICAgY21kX2tleSA9IHNlbGYucmpPYmouY2x1c3Rlci5jbWRfbmFt
      ZXNbJ2ZzIGxzJ10KICAgICAgICBjbWRfb3V0ID0gc2VsZi5yak9iai5jbHVzdGVyLmNtZF9vdXRw
      dXRfbWFwW2NtZF9rZXldCiAgICAgICAgY21kX2pzb25fb3V0ID0ganNvbi5sb2FkcyhjbWRfb3V0
      KQogICAgICAgIGZpcnN0X2ZzX2RldGFpbHMgPSBjbWRfanNvbl9vdXRbMF0KICAgICAgICBuZXdf
      ZGF0YV9wb29sX25hbWUgPSAnbXlmcy1kYXRhMScKICAgICAgICBmaXJzdF9mc19kZXRhaWxzWydk
      YXRhX3Bvb2xzJ10uYXBwZW5kKG5ld19kYXRhX3Bvb2xfbmFtZSkKICAgICAgICBwcmludCgiTW9k
      aWZpZWQgSlNPTiBDbWQgT3V0OiB7fSIuZm9ybWF0KGNtZF9qc29uX291dCkpCiAgICAgICAgc2Vs
      Zi5yak9iai5fYXJnX3BhcnNlci5jZXBoZnNfZGF0YV9wb29sX25hbWUgPSBuZXdfZGF0YV9wb29s
      X25hbWUKICAgICAgICBzZWxmLnJqT2JqLmNsdXN0ZXIuY21kX291dHB1dF9tYXBbY21kX2tleV0g
      PSBqc29uLmR1bXBzKGNtZF9qc29uX291dCkKICAgICAgICBzZWxmLnJqT2JqLmdldF9jZXBoZnNf
      ZGF0YV9wb29sX2RldGFpbHMoKQogICAgICAgICMgdXNlIGEgbm9uLWV4aXN0aW5nIGRhdGEtcG9v
      bC1uYW1lCiAgICAgICAgYmFkX2RhdGFfcG9vbF9uYW1lID0gJ215ZnMtZGF0YTMnCiAgICAgICAg
      c2VsZi5yak9iai5fYXJnX3BhcnNlci5jZXBoZnNfZGF0YV9wb29sX25hbWUgPSBiYWRfZGF0YV9w
      b29sX25hbWUKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYucmpPYmouZ2V0X2NlcGhmc19k
      YXRhX3Bvb2xfZGV0YWlscygpCiAgICAgICAgICAgIHNlbGYuZmFpbCgiQW4gRXhjZXB0aW9uIHdh
      cyBleHBlY3RlZCB0byBiZSB0aHJvd24iKQogICAgICAgIGV4Y2VwdCBFeGVjdXRpb25GYWlsdXJl
      RXhjZXB0aW9uIGFzIGVycjoKICAgICAgICAgICAgcHJpbnQoIlN1Y2Nlc3NmdWxseSB0aHJvd24g
      ZXJyb3I6IHt9Ii5mb3JtYXQoZXJyKSkKICAgICAgICAjIGVtcHR5IGRhdGEtcG9vbCBzY2VuYXJp
      bwogICAgICAgIGZpcnN0X2ZzX2RldGFpbHNbJ2RhdGFfcG9vbHMnXSA9IFtdCiAgICAgICAgc2Vs
      Zi5yak9iai5jbHVzdGVyLmNtZF9vdXRwdXRfbWFwW2NtZF9rZXldID0ganNvbi5kdW1wcyhjbWRf
      anNvbl9vdXQpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnJqT2JqLmdldF9jZXBoZnNf
      ZGF0YV9wb29sX2RldGFpbHMoKQogICAgICAgICAgICBzZWxmLmZhaWwoIkFuIEV4Y2VwdGlvbiB3
      YXMgZXhwZWN0ZWQgdG8gYmUgdGhyb3duIikKICAgICAgICBleGNlcHQgRXhlY3V0aW9uRmFpbHVy
      ZUV4Y2VwdGlvbiBhcyBlcnI6CiAgICAgICAgICAgIHByaW50KCJTdWNjZXNzZnVsbHkgdGhyb3du
      IGVycm9yOiB7fSIuZm9ybWF0KGVycikpCgogICAgZGVmIHRlc3RfdmFsaWRfcmd3X2VuZHBvaW50
      KHNlbGYpOgogICAgICAgIHNlbGYucmpPYmouX2ludmFsaWRfZW5kcG9pbnQoIjEwLjEwLjIxMi4x
      MzM6ODAwMCIpCiAgICAgICAgIyBpbnZhbGlkIHBvcnQKICAgICAgICB0cnk6CiAgICAgICAgICAg
      IHNlbGYucmpPYmouX2ludmFsaWRfZW5kcG9pbnQoIjEwLjEwLjIxMi4xMzM6MjM4MDAwIikKICAg
      ICAgICAgICAgc2VsZi5mYWlsKCJBbiBFeGNlcHRpb24gd2FzIGV4cGVjdGVkIHRvIGJlIHRocm93
      biIpCiAgICAgICAgZXhjZXB0IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24gYXMgZXJyOgogICAg
      ICAgICAgICBwcmludCgiU3VjY2Vzc2Z1bGx5IHRocm93biBlcnJvcjoge30iLmZvcm1hdChlcnIp
      KQogICAgICAgICMgb3V0IG9mIHJhbmdlIElQCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxm
      LnJqT2JqLl9pbnZhbGlkX2VuZHBvaW50KCIxMC4xMDMzLjIxMi4xMzM6ODAwMCIpCiAgICAgICAg
      ICAgIHNlbGYuZmFpbCgiQW4gRXhjZXB0aW9uIHdhcyBleHBlY3RlZCB0byBiZSB0aHJvd24iKQog
      ICAgICAgIGV4Y2VwdCBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uIGFzIGVycjoKICAgICAgICAg
      ICAgcHJpbnQoIlN1Y2Nlc3NmdWxseSB0aHJvd24gZXJyb3I6IHt9Ii5mb3JtYXQoZXJyKSkKICAg
      ICAgICAjIG1hbCBmb3JtYXR0ZWQgSVAKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYucmpP
      YmouX2ludmFsaWRfZW5kcG9pbnQoIjEwLjEwMy4uMjEyLjEzMzo4MDAwIikKICAgICAgICAgICAg
      c2VsZi5mYWlsKCJBbiBFeGNlcHRpb24gd2FzIGV4cGVjdGVkIHRvIGJlIHRocm93biIpCiAgICAg
      ICAgZXhjZXB0IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24gYXMgZXJyOgogICAgICAgICAgICBw
      cmludCgiU3VjY2Vzc2Z1bGx5IHRocm93biBlcnJvcjoge30iLmZvcm1hdChlcnIpKQogICAgICAg
      IHRyeToKICAgICAgICAgICAgc2VsZi5yak9iai5faW52YWxpZF9lbmRwb2ludCgiMTAuMTAzLjIx
      Mi4xMzM6OjgwMDAiKQogICAgICAgICAgICBzZWxmLmZhaWwoIkFuIEV4Y2VwdGlvbiB3YXMgZXhw
      ZWN0ZWQgdG8gYmUgdGhyb3duIikKICAgICAgICBleGNlcHQgRXhlY3V0aW9uRmFpbHVyZUV4Y2Vw
      dGlvbiBhcyBlcnI6CiAgICAgICAgICAgIHByaW50KCJTdWNjZXNzZnVsbHkgdGhyb3duIGVycm9y
      OiB7fSIuZm9ybWF0KGVycikpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnJqT2JqLl9p
      bnZhbGlkX2VuZHBvaW50KCIxMC4xMC4xMDMuMjEyLjEzMzo4MDAwIikKICAgICAgICAgICAgc2Vs
      Zi5mYWlsKCJBbiBFeGNlcHRpb24gd2FzIGV4cGVjdGVkIHRvIGJlIHRocm93biIpCiAgICAgICAg
      ZXhjZXB0IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24gYXMgZXJyOgogICAgICAgICAgICBwcmlu
      dCgiU3VjY2Vzc2Z1bGx5IHRocm93biBlcnJvcjoge30iLmZvcm1hdChlcnIpKQoKICAgIGRlZiBh
      ZGRfbm9uX2RlZmF1bHRfcG9vbF9wcmVmaXhfY21kKHNlbGYsIG5vbl9kZWZhdWx0X3Bvb2xfcHJl
      Zml4KToKICAgICAgICBqc29uX2NtZCA9IGpzb24ubG9hZHMoCiAgICAgICAgICAgIHNlbGYucmpP
      YmouY2x1c3Rlci5jbWRfbmFtZXNbJ2NhcHNfY2hhbmdlX2RlZmF1bHRfcG9vbF9wcmVmaXgnXSkK
      ICAgICAgICBjdXJfb3NkX2NhcHMgPSBqc29uX2NtZFsnY2FwcyddW2pzb25fY21kWydjYXBzJ10u
      aW5kZXgoJ29zZCcpICsgMV0KICAgICAgICBuZXdfb3NkX2NhcHMgPSBjdXJfb3NkX2NhcHMucmVw
      bGFjZSgKICAgICAgICAgICAgJ2RlZmF1bHQuJywgJ3t9LicuZm9ybWF0KG5vbl9kZWZhdWx0X3Bv
      b2xfcHJlZml4KSkKICAgICAgICBhbGxfb3NkX2NhcHMgPSAie30sIHt9Ii5mb3JtYXQobmV3X29z
      ZF9jYXBzLCBjdXJfb3NkX2NhcHMpCiAgICAgICAgY2Fwc19saXN0ID0gW3guc3RyaXAoKSBmb3Ig
      eCBpbiBhbGxfb3NkX2NhcHMuc3BsaXQoJywnKSBpZiB4LnN0cmlwKCldCiAgICAgICAgbmV3X2Nh
      cHNfbGlzdCA9IFtdCiAgICAgICAgW25ld19jYXBzX2xpc3QuYXBwZW5kKHgpIGZvciB4IGluIGNh
      cHNfbGlzdCBpZiB4IG5vdCBpbiBuZXdfY2Fwc19saXN0XQogICAgICAgIGFsbF9vc2RfY2FwcyA9
      ICIsICIuam9pbihuZXdfY2Fwc19saXN0KQogICAgICAgIGpzb25fY21kWydjYXBzJ11banNvbl9j
      bWRbJ2NhcHMnXS5pbmRleCgnb3NkJykgKyAxXSA9IGFsbF9vc2RfY2FwcwogICAgICAgIHNlbGYu
      cmpPYmouY2x1c3Rlci5jbWRfbmFtZXNbJ2NhcHNfY2hhbmdlX25vbl9kZWZhdWx0X3Bvb2xfcHJl
      Zml4J10gPSBqc29uLmR1bXBzKAogICAgICAgICAgICBqc29uX2NtZCkKICAgICAgICBzZWxmLnJq
      T2JqLmNsdXN0ZXIuY21kX291dHB1dF9tYXBbCiAgICAgICAgICAgIHNlbGYucmpPYmouY2x1c3Rl
      ci5jbWRfbmFtZXNbJ2NhcHNfY2hhbmdlX25vbl9kZWZhdWx0X3Bvb2xfcHJlZml4J11dID0gJ1t7
      fV0nCgogICAgZGVmIHRlc3RfdXBncmFkZV91c2VyX3Blcm1pc3Npb25zKHNlbGYpOgogICAgICAg
      IHNlbGYucmpPYmogPSBSYWRvc0pTT04oCiAgICAgICAgICAgIFsnLS11cGdyYWRlJywgJy0tcnVu
      LWFzLXVzZXI9Y2xpZW50LmhlYWx0aGNoZWNrZXInXSkKICAgICAgICAjIGZvciB0ZXN0aW5nLCB3
      ZSBhcmUgdXNpbmcgJ0R1bW15UmFkb3MnIG9iamVjdAogICAgICAgIHNlbGYucmpPYmouY2x1c3Rl
      ciA9IER1bW15UmFkb3MuUmFkb3MoKQogICAgICAgIHNlbGYucmpPYmoubWFpbigpCiAgICAgICAg
      c2VsZi5yak9iaiA9IFJhZG9zSlNPTigKICAgICAgICAgICAgWyctLXVwZ3JhZGUnLCAnLS1ydW4t
      YXMtdXNlcj1jbGllbnQuaGVhbHRoY2hlY2tlcicsICctLXJndy1wb29sLXByZWZpeD1ub25EZWZh
      dWx0J10pCiAgICAgICAgc2VsZi5yak9iai5jbHVzdGVyID0gRHVtbXlSYWRvcy5SYWRvcygpCiAg
      ICAgICAgc2VsZi5hZGRfbm9uX2RlZmF1bHRfcG9vbF9wcmVmaXhfY21kKCdub25EZWZhdWx0JykK
      ICAgICAgICBzZWxmLnJqT2JqLm1haW4oKQoKICAgIGRlZiB0ZXN0X21vbml0b3JpbmdfZW5kcG9p
      bnRfdmFsaWRhdGlvbihzZWxmKToKICAgICAgICBzZWxmLnJqT2JqID0gUmFkb3NKU09OKFsnLS1y
      YmQtZGF0YS1wb29sLW5hbWU9YWJjJywgJy0tZm9ybWF0PWpzb24nXSkKICAgICAgICBzZWxmLnJq
      T2JqLmNsdXN0ZXIgPSBEdW1teVJhZG9zLlJhZG9zKCkKCiAgICAgICAgdmFsaWRfaXBfcG9ydHMg
      PSBbKCIxMC4yMi4zMS4xMzEiLCAiMzUzNCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICgi
      MTAuMTc3LjMuODEiLCAiIiksICgiIiwgIiIpLCAoIiIsICI5MDkyIildCiAgICAgICAgZm9yIGVh
      Y2hfaXBfcG9ydF9wYWlyIGluIHZhbGlkX2lwX3BvcnRzOgogICAgICAgICAgICAjIHJlc2V0IG1v
      bml0b3JpbmcgaXAgYW5kIHBvcnQKICAgICAgICAgICAgc2VsZi5yak9iai5fYXJnX3BhcnNlci5t
      b25pdG9yaW5nX2VuZHBvaW50ID0gJycKICAgICAgICAgICAgc2VsZi5yak9iai5fYXJnX3BhcnNl
      ci5tb25pdG9yaW5nX2VuZHBvaW50X3BvcnQgPSAnJwogICAgICAgICAgICBuZXdfbW9uX2lwLCBu
      ZXdfbW9uX3BvcnQgPSBlYWNoX2lwX3BvcnRfcGFpcgogICAgICAgICAgICBjaGVja19pcF92YWwg
      PSBzZWxmLnJqT2JqLmNsdXN0ZXIuZHVtbXlfaG9zdF9pcF9tYXAuZ2V0KAogICAgICAgICAgICAg
      ICAgbmV3X21vbl9pcCwgbmV3X21vbl9pcCkKICAgICAgICAgICAgY2hlY2tfcG9ydF92YWwgPSBS
      YWRvc0pTT04uREVGQVVMVF9NT05JVE9SSU5HX0VORFBPSU5UX1BPUlQKICAgICAgICAgICAgaWYg
      bmV3X21vbl9pcDoKICAgICAgICAgICAgICAgIHNlbGYucmpPYmouX2FyZ19wYXJzZXIubW9uaXRv
      cmluZ19lbmRwb2ludCA9IG5ld19tb25faXAKICAgICAgICAgICAgaWYgbmV3X21vbl9wb3J0Ogog
      ICAgICAgICAgICAgICAgY2hlY2tfcG9ydF92YWwgPSBuZXdfbW9uX3BvcnQKICAgICAgICAgICAg
      ICAgIHNlbGYucmpPYmouX2FyZ19wYXJzZXIubW9uaXRvcmluZ19lbmRwb2ludF9wb3J0ID0gbmV3
      X21vbl9wb3J0CiAgICAgICAgICAgICMgZm9yIHRlc3RpbmcsIHdlIGFyZSB1c2luZyAnRHVtbXlS
      YWRvcycgb2JqZWN0CiAgICAgICAgICAgIG1vbl9pcHMsIG1vbl9wb3J0ID0gc2VsZi5yak9iai5n
      ZXRfYWN0aXZlX2FuZF9zdGFuZGJ5X21ncnMoKQogICAgICAgICAgICBtb25faXAgPSBtb25faXBz
      LnNwbGl0KCIsIilbMF0KICAgICAgICAgICAgaWYgY2hlY2tfaXBfdmFsIGFuZCBjaGVja19pcF92
      YWwgIT0gbW9uX2lwOgogICAgICAgICAgICAgICAgc2VsZi5mYWlsKCJFeHBlY3RlZCBJUDoge30s
      IFJldHVybmVkIElQOiB7fSIuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgIGNoZWNrX2lwX3Zh
      bCwgbW9uX2lwKSkKICAgICAgICAgICAgaWYgY2hlY2tfcG9ydF92YWwgYW5kIGNoZWNrX3BvcnRf
      dmFsICE9IG1vbl9wb3J0OgogICAgICAgICAgICAgICAgc2VsZi5mYWlsKCJFeHBlY3RlZCBQb3J0
      OiAne30nLCBSZXR1cm5lZCBQb3J0OiAne30nIi5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAg
      Y2hlY2tfcG9ydF92YWwsIG1vbl9wb3J0KSkKICAgICAgICAgICAgcHJpbnQoIk1vbklQOiB7fSwg
      TW9uUG9ydDoge30iLmZvcm1hdChtb25faXAsIG1vbl9wb3J0KSkKCiAgICAgICAgaW52YWxpZF9p
      cF9wb3J0cyA9IFsoIjEwLjIyLjMxLjEzMS40MyIsICI1MzM0IiksICgiIiwgIjkxOTQzIiksCiAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAoIjEwLjE3Ny4zLjgxIiwgIjkwMzIwIiksICgiIiwg
      IjczNDIyIiksICgiMTAuMjMyLjEyLjgiLCAiOTA5MjIiKV0KICAgICAgICBmb3IgZWFjaF9pcF9w
      b3J0X3BhaXIgaW4gaW52YWxpZF9pcF9wb3J0czoKICAgICAgICAgICAgIyByZXNldCB0aGUgY29t
      bWFuZC1saW5lIG1vbml0b3JpbmcgYXJncwogICAgICAgICAgICBzZWxmLnJqT2JqLl9hcmdfcGFy
      c2VyLm1vbml0b3JpbmdfZW5kcG9pbnQgPSAnJwogICAgICAgICAgICBzZWxmLnJqT2JqLl9hcmdf
      cGFyc2VyLm1vbml0b3JpbmdfZW5kcG9pbnRfcG9ydCA9ICcnCiAgICAgICAgICAgIG5ld19tb25f
      aXAsIG5ld19tb25fcG9ydCA9IGVhY2hfaXBfcG9ydF9wYWlyCiAgICAgICAgICAgIGlmIG5ld19t
      b25faXA6CiAgICAgICAgICAgICAgICBzZWxmLnJqT2JqLl9hcmdfcGFyc2VyLm1vbml0b3Jpbmdf
      ZW5kcG9pbnQgPSBuZXdfbW9uX2lwCiAgICAgICAgICAgIGlmIG5ld19tb25fcG9ydDoKICAgICAg
      ICAgICAgICAgIHNlbGYucmpPYmouX2FyZ19wYXJzZXIubW9uaXRvcmluZ19lbmRwb2ludF9wb3J0
      ID0gbmV3X21vbl9wb3J0CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIG1vbl9pcCwg
      bW9uX3BvcnQgPSBzZWxmLnJqT2JqLmdldF9hY3RpdmVfYW5kX3N0YW5kYnlfbWdycygpCiAgICAg
      ICAgICAgICAgICBwcmludCgiW1dyb25nXSBNb25JUDoge30sIE1vblBvcnQ6IHt9Ii5mb3JtYXQo
      bW9uX2lwLCBtb25fcG9ydCkpCiAgICAgICAgICAgICAgICBzZWxmLmZhaWwoIkFuIGV4Y2VwdGlv
      biB3YXMgZXhwZWN0ZWQiKQogICAgICAgICAgICBleGNlcHQgRXhlY3V0aW9uRmFpbHVyZUV4Y2Vw
      dGlvbiBhcyBlcnI6CiAgICAgICAgICAgICAgICBwcmludCgiRXhjZXB0aW9uIHRocm93biBzdWNj
      ZXNzZnVsbHk6IHt9Ii5mb3JtYXQoZXJyKSkK
  name: ceph.v{{.RookOperatorCsvVersion}}
  namespace: placeholder
spec:
  apiservicedefinitions: {}
  customresourcedefinitions:
    owned:
    - kind: CephCluster
      name: cephclusters.ceph.rook.io
      version: v1
      displayName: Ceph Cluster
      description: Represents a Ceph cluster.
    - kind: CephBlockPool
      name: cephblockpools.ceph.rook.io
      version: v1
      displayName: Ceph Block Pool
      description: Represents a Ceph Block Pool.
    - kind: CephObjectStore
      name: cephobjectstores.ceph.rook.io
      version: v1
      displayName: Ceph Object Store
      description: Represents a Ceph Object Store.
      specDescriptors:
      - description: Coding Chunks
        displayName: Coding Chunks
        path: dataPool.erasureCoded.codingChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Data Chunks
        displayName: Data Chunks
        path: dataPool.erasureCoded.dataChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: failureDomain
        displayName: failureDomain
        path: dataPool.failureDomain
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Size
        displayName: Size
        path: dataPool.replicated.size
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Annotations
        displayName: Annotations
        path: gateway.annotations
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:annotations
      - description: Instances
        displayName: Instances
        path: gateway.instances
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Resources
        displayName: Resources
        path: gateway.resources
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:com.tectonic.ui:resourceRequirements
      - description: placement
        displayName: placement
        path: gateway.placement
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:placement
      - description: securePort
        displayName: securePort
        path: gateway.securePort
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:securePort
      - description: sslCertificateRef
        displayName: sslCertificateRef
        path: gateway.sslCertificateRef
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:sslCertificateRef
      - description: Type
        displayName: Type
        path: gateway.type
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Coding Chunks
        displayName: Coding Chunks
        path: metadataPool.erasureCoded.codingChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Data Chunks
        displayName: Data Chunks
        path: metadataPool.erasureCoded.dataChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: failureDomain
        displayName: failureDomain
        path: metadataPool.failureDomain
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Size
        displayName: Size
        path: metadataPool.replicated.size
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:number
    - kind: CephObjectStoreUser
      name: cephobjectstoreusers.ceph.rook.io
      version: v1
      displayName: Ceph Object Store User
      description: Represents a Ceph Object Store User.
    - kind: CephNFS
      name: cephnfses.ceph.rook.io
      version: v1
      displayName: Ceph NFS
      description: Represents a cluster of Ceph NFS ganesha gateways.
    - kind: CephClient
      name: cephclients.ceph.rook.io
      version: v1
      displayName: Ceph Client
      description: Represents a Ceph User.
    - kind: CephFilesystem
      name: cephfilesystems.ceph.rook.io
      version: v1
      displayName: Ceph Filesystem
      description: Represents a Ceph Filesystem.
    - kind: CephFilesystemMirror
      name: cephfilesystemmirrors.ceph.rook.io
      version: v1
      displayName: Ceph Filesystem Mirror
      description: Represents a Ceph Filesystem Mirror.
    - kind: CephRBDMirror
      name: cephrbdmirrors.ceph.rook.io
      version: v1
      displayName: Ceph RBD Mirror
      description: Represents a Ceph RBD Mirror.
    - kind: CephObjectRealm
      name: cephobjectrealms.ceph.rook.io
      version: v1
      displayName: Ceph Object Store Realm
      description: Represents a Ceph Object Store Realm.
    - kind: CephObjectZoneGroup
      name: cephobjectzonegroups.ceph.rook.io
      version: v1
      displayName: Ceph Object Store Zone Group
      description: Represents a Ceph Object Store Zone Group.
    - kind: CephObjectZone
      name: cephobjectzones.ceph.rook.io
      version: v1
      displayName: Ceph Object Store Zone
      description: Represents a Ceph Object Store Zone.
    - kind: ObjectBucketClaim
      name: objectbucketclaims.objectbucket.io
      version: v1alpha1
    - kind: ObjectBucket
      name: objectbuckets.objectbucket.io
      version: v1alpha1
    - kind: Volume
      name: volumes.rook.io
      version: v1alpha2
  displayName: Rook-Ceph
  icon:
  - base64data: PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMiwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA3MCA3MCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNzAgNzA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojMkIyQjJCO30KPC9zdHlsZT4KPGc+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTUwLjUsNjcuNkgxOS45Yy04LDAtMTQuNS02LjUtMTQuNS0xNC41VjI5LjJjMC0xLjEsMC45LTIuMSwyLjEtMi4xaDU1LjRjMS4xLDAsMi4xLDAuOSwyLjEsMi4xdjIzLjkKCQkJCUM2NSw2MS4xLDU4LjUsNjcuNiw1MC41LDY3LjZ6IE05LjYsMzEuMnYyMS45YzAsNS43LDQuNiwxMC4zLDEwLjMsMTAuM2gzMC42YzUuNywwLDEwLjMtNC42LDEwLjMtMTAuM1YzMS4ySDkuNnoiLz4KCQk8L2c+CgkJPGc+CgkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00Mi40LDU2LjdIMjhjLTEuMSwwLTIuMS0wLjktMi4xLTIuMXYtNy4yYzAtNS4xLDQuMi05LjMsOS4zLTkuM3M5LjMsNC4yLDkuMyw5LjN2Ny4yCgkJCQlDNDQuNSw1NS43LDQzLjYsNTYuNyw0Mi40LDU2Ljd6IE0zMCw1Mi41aDEwLjN2LTUuMmMwLTIuOS0yLjMtNS4yLTUuMi01LjJjLTIuOSwwLTUuMiwyLjMtNS4yLDUuMlY1Mi41eiIvPgoJCTwvZz4KCQk8Zz4KCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTYyLjksMjMuMkM2Mi45LDIzLjIsNjIuOSwyMy4yLDYyLjksMjMuMmwtMTEuMSwwYy0xLjEsMC0yLjEtMC45LTIuMS0yLjFjMC0xLjEsMC45LTIuMSwyLjEtMi4xCgkJCQljMCwwLDAsMCwwLDBsOS4xLDBWNi43aC02Ljl2My41YzAsMC41LTAuMiwxLjEtMC42LDEuNWMtMC40LDAuNC0wLjksMC42LTEuNSwwLjZsMCwwbC0xMS4xLDBjLTEuMSwwLTIuMS0wLjktMi4xLTIuMVY2LjdoLTYuOQoJCQkJdjMuNWMwLDEuMS0wLjksMi4xLTIuMSwyLjFsLTExLjEsMGMtMC41LDAtMS4xLTAuMi0xLjUtMC42Yy0wLjQtMC40LTAuNi0wLjktMC42LTEuNVY2LjdIOS42djEyLjRoOWMxLjEsMCwyLjEsMC45LDIuMSwyLjEKCQkJCXMtMC45LDIuMS0yLjEsMi4xaC0xMWMtMS4xLDAtMi4xLTAuOS0yLjEtMi4xVjQuNmMwLTEuMSwwLjktMi4xLDIuMS0yLjFoMTEuMWMxLjEsMCwyLjEsMC45LDIuMSwyLjF2My41bDcsMFY0LjYKCQkJCWMwLTEuMSwwLjktMi4xLDIuMS0yLjFoMTEuMWMxLjEsMCwyLjEsMC45LDIuMSwyLjF2My41bDYuOSwwVjQuNmMwLTEuMSwwLjktMi4xLDIuMS0yLjFoMTEuMUM2NCwyLjYsNjUsMy41LDY1LDQuNnYxNi41CgkJCQljMCwwLjUtMC4yLDEuMS0wLjYsMS41QzY0LDIzLDYzLjQsMjMuMiw2Mi45LDIzLjJ6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+Cjwvc3ZnPg==
    mediatype: image/svg+xml
  install:
    spec:
      clusterPermissions:
      - rules:
        - apiGroups:
          - ceph.rook.io
          resources:
          - '*'
          verbs:
          - get
          - watch
          - list
        serviceAccountName: rook-ceph-admission-controller-role
      - rules:
        - apiGroups:
          - ""
          - apps
          - extensions
          resources:
          - secrets
          - pods
          - pods/log
          - services
          - configmaps
          - deployments
          - daemonsets
          verbs:
          - get
          - list
          - watch
          - patch
          - create
          - update
          - delete
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - nodes
          - nodes/proxy
          - services
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          - persistentvolumes
          - persistentvolumeclaims
          - endpoints
          verbs:
          - get
          - list
          - watch
          - patch
          - create
          - update
          - delete
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - batch
          resources:
          - jobs
          - cronjobs
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - ceph.rook.io
          resources:
          - '*'
          verbs:
          - '*'
        - apiGroups:
          - rook.io
          resources:
          - '*'
          verbs:
          - '*'
        - apiGroups:
          - policy
          - apps
          - extensions
          resources:
          - poddisruptionbudgets
          - deployments
          - replicasets
          verbs:
          - '*'
        - apiGroups:
          - healthchecking.openshift.io
          resources:
          - machinedisruptionbudgets
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - machine.openshift.io
          resources:
          - machines
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - storage.k8s.io
          resources:
          - csidrivers
          verbs:
          - create
          - delete
          - get
          - update
        - apiGroups:
          - k8s.cni.cncf.io
          resources:
          - network-attachment-definitions
          verbs:
          - get
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          - nodes
          - nodes/proxy
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - create
          - patch
          - list
          - get
          - watch
        serviceAccountName: rook-ceph-mgr
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          - configmaps
          verbs:
          - '*'
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - objectbucket.io
          resources:
          - '*'
          verbs:
          - '*'
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
        serviceAccountName: rook-ceph-osd
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - watch
        serviceAccountName: rook-ceph-mgr
      - rules:
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - update
        - apiGroups:
          - ""
          resources:
          - namespaces
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
        serviceAccountName: rook-csi-cephfs-plugin-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - create
          - delete
          - update
          - patch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - list
          - watch
          - create
          - update
          - patch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents
          verbs:
          - create
          - get
          - list
          - watch
          - update
          - delete
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents/status
          verbs:
          - update
        - apiGroups:
          - apiextensions.k8s.io
          resources:
          - customresourcedefinitions
          verbs:
          - create
          - list
          - watch
          - delete
          - get
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots/status
          verbs:
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
          - patch
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments/status
          verbs:
          - patch
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims/status
          verbs:
          - update
          - patch
        serviceAccountName: rook-csi-cephfs-provisioner-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - update
        - apiGroups:
          - ""
          resources:
          - namespaces
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
        serviceAccountName: rook-csi-rbd-plugin-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - create
          - delete
          - update
          - patch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
          - patch
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments/status
          verbs:
          - patch
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - list
          - watch
          - create
          - update
          - patch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents
          verbs:
          - create
          - get
          - list
          - watch
          - update
          - delete
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents/status
          verbs:
          - update
        - apiGroups:
          - apiextensions.k8s.io
          resources:
          - customresourcedefinitions
          verbs:
          - create
          - list
          - watch
          - delete
          - get
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots/status
          verbs:
          - update
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims/status
          verbs:
          - update
          - patch
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
        serviceAccountName: rook-csi-rbd-provisioner-sa
      - rules:
        - verbs:
          - use
          apiGroups:
          - security.openshift.io
          resources:
          - securitycontextconstraints
          resourceNames:
          - privileged
        serviceAccountName: rook-ceph-system
      deployments:
      - name: rook-ceph-operator
        spec:
          replicas: 1
          selector:
            matchLabels:
              app: rook-ceph-operator
          strategy: {}
          template:
            metadata:
              labels:
                app: rook-ceph-operator
            spec:
              containers:
              - args:
                - ceph
                - operator
                env:
                - name: ROOK_CURRENT_NAMESPACE_ONLY
                  value: "false"
                - name: FLEXVOLUME_DIR_PATH
                  value: /etc/kubernetes/kubelet-plugins/volume/exec
                - name: ROOK_LOG_LEVEL
                  value: INFO
                - name: ROOK_DISCOVER_DEVICES_INTERVAL
                  value: 60m
                - name: ROOK_HOSTPATH_REQUIRES_PRIVILEGED
                  value: "true"
                - name: ROOK_ENABLE_SELINUX_RELABELING
                  value: "true"
                - name: ROOK_ENABLE_FSGROUP
                  value: "true"
                - name: ROOK_DISABLE_DEVICE_HOTPLUG
                  value: "false"
                - name: DISCOVER_DAEMON_UDEV_BLACKLIST
                  value: (?i)dm-[0-9]+,(?i)rbd[0-9]+,(?i)nbd[0-9]+
                - name: ROOK_ENABLE_MACHINE_DISRUPTION_BUDGET
                  value: "false"
                - name: ROOK_UNREACHABLE_NODE_TOLERATION_SECONDS
                  value: "5"
                - name: NODE_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: spec.nodeName
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                image: '{{.RookOperatorImage}}'
                name: rook-ceph-operator
                resources: {}
                volumeMounts:
                - mountPath: /var/lib/rook
                  name: rook-config
                - mountPath: /etc/ceph
                  name: default-config-dir
              serviceAccountName: rook-ceph-system
              volumes:
              - emptyDir: {}
                name: rook-config
              - emptyDir: {}
                name: default-config-dir
      permissions:
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - configmaps
          - services
          verbs:
          - get
          - list
          - watch
          - patch
          - create
          - update
          - delete
        - apiGroups:
          - apps
          - extensions
          resources:
          - daemonsets
          - statefulsets
          - deployments
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - batch
          resources:
          - cronjobs
          verbs:
          - delete
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephclusters
          - cephclusters/finalizers
          verbs:
          - get
          - list
          - create
          - update
          - delete
        serviceAccountName: rook-ceph-osd
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - services
          - pods/log
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - batch
          resources:
          - jobs
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - ceph.rook.io
          resources:
          - '*'
          verbs:
          - '*'
        serviceAccountName: rook-ceph-mgr
      - rules:
        - apiGroups:
          - ""
          resources:
          - endpoints
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - create
          - delete
        - apiGroups:
          - coordination.k8s.io
          resources:
          - leases
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        serviceAccountName: rook-csi-cephfs-provisioner-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - endpoints
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - watch
          - create
          - delete
          - update
        - apiGroups:
          - coordination.k8s.io
          resources:
          - leases
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        serviceAccountName: rook-csi-rbd-provisioner-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - configmaps
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        serviceAccountName: rook-ceph-cmd-reporter
    strategy: deployment
  installModes:
  - type: OwnNamespace
    supported: true
  - type: SingleNamespace
    supported: true
  - type: MultiNamespace
    supported: false
  - type: AllNamespaces
    supported: false
  keywords:
  - rook
  - ceph
  - storage
  - object storage
  - open source
  - block storage
  - shared filesystem
  maintainers:
  - name: Red Hat, Inc.
    email: customerservice@redhat.com
  maturity: alpha
  provider:
    name: Red Hat, Inc.
  version: {{.RookOperatorCsvVersion}}
  replaces: rook-ceph.v1.1.1
  description: |2

    The Rook-Ceph storage operator packages, deploys, manages, upgrades and scales Ceph storage for providing persistent storage to infrastructure services (Logging, Metrics, Registry) as well as stateful applications in Kubernetes clusters.

    ## Rook-Ceph Storage Operator

    Rook runs as a cloud-native service in Kubernetes clusters for optimal integration with applications in need of storage, and handles the heavy-lifting behind the scenes such as provisioning and management.
    Rook orchestrates battle-tested open-source storage technology Ceph, which has years of production deployments and runs some of the worlds largest clusters.

    Ceph is a massively scalable, software-defined, cloud native storage platform that offers block, file and object storage services.
    Ceph can be used to back a wide variety of applications including relational databases, NoSQL databases, CI/CD tool-sets, messaging, AI/ML and analytics applications.
    Ceph is a proven storage platform that backs some of the world's largest storage deployments and has a large vibrant open source community backing the project.

    ## Supported features
    * **High Availability and resiliency** - Ceph has no single point of failures (SPOF) and all its components work natively in a highly available fashion
    * **Data Protection** - Ceph periodically scrub for inconsistent objects and repair them if necessary, making sure your replicas are always coherent
    * **Consistent storage platform across hybrid cloud** - Ceph can be deployed anywhere (on-premise or bare metal) and thus offers a similar experience regardless
    * **Block, File & Object storage service** - Ceph can expose your data through several storage interfaces, solving all the application use cases
    * **Scale up/down** - addition and removal of storage is fully covered by the operator.
    * **Dashboard** - The Operator deploys a dashboard for monitoring and introspecting your cluster.

    ## Before you start
    https://rook.io/docs/rook/v1.0/k8s-pre-reqs.html
  minKubeVersion: 1.10.0
  labels:
    alm-owner-etcd: rookoperator
    operated-by: rookoperator
  selector:
    matchLabels:
      alm-owner-etcd: rookoperator
      operated-by: rookoperator
  links:
  - name: Blog
    url: https://blog.rook.io
  - name: Documentation
    url: https://rook.github.io/docs/rook/v1.0/
